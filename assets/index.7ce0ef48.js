import{q as e,r as n,y as t,x as o,G as a,o as s,c as l,O as r,k as i,h as u,w as d,i as c,v as f,a as p,n as m,V as v,T as h,Q as w,z as y}from"./vendor.bac705d4.js";import{t as z,g as x,a as C}from"./elements.f945da86.js";import{u as g}from"./zIndex.779be491.js";import{_ as k}from"./IconSfc.d1e88af2.js";var S=k(e({name:"VarMenu",props:{show:{type:Boolean,default:!1},alignment:{type:String,default:"top",validator:function(e){return["top","bottom"].includes(e)}},offsetX:{type:[Number,String],default:0},offsetY:{type:[Number,String],default:0},teleport:{default:"body"},onOpen:{type:Function},onOpened:{type:Function},onClose:{type:Function},onClosed:{type:Function},"onUpdate:show":{type:Function}},setup(e){const s=n(null),l=n(null),r=n(0),i=n(0),{zIndex:u}=g((()=>e.show),1);let d=!1;const c=()=>{var n;d?d=!1:e.show&&(null==(n=e["onUpdate:show"])||n.call(e,!1))},f=()=>{r.value="top"===e.alignment?x(s.value):x(s.value)-l.value.offsetHeight,i.value=C(s.value)};return t((()=>e.alignment),f),t((()=>e.show),(async n=>{const{onOpen:t,onClose:o}=e;await y(),n&&f(),n?null==t||t():null==o||o()})),o((()=>{f(),document.addEventListener("click",c),window.addEventListener("resize",f)})),a((()=>{document.removeEventListener("click",c),window.removeEventListener("resize",f)})),{zIndex:u,host:s,menu:l,top:r,left:i,toSizeUnit:z,handleClick:()=>{d=!0},resize:f}}}),[["render",function(e,n,t,o,a,y){return s(),l("div",{class:"var-menu",ref:"host",onClick:n[1]||(n[1]=(...n)=>e.handleClick&&e.handleClick(...n))},[r(e.$slots,"default"),(s(),i(w,{to:e.teleport},[u(h,{name:"var-menu",onAfterEnter:e.onOpened,onAfterLeave:e.onClosed},{default:d((()=>[c(p("div",{class:"var-menu__menu var-elevation--3",ref:"menu",style:m({top:`calc(${e.top}px + ${e.toSizeUnit(e.offsetY)})`,left:`calc(${e.left}px + ${e.toSizeUnit(e.offsetX)})`,zIndex:e.zIndex}),onClick:n[0]||(n[0]=v((()=>{}),["stop"]))},[r(e.$slots,"menu")],4),[[f,e.show]])])),_:3},8,["onAfterEnter","onAfterLeave"])],8,["to"]))],512)}]]);S.install=function(e){e.component(S.name,S)};export{S as M};
