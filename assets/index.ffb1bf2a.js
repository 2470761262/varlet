var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,r=(t,a,i)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[a]=i;import{R as l}from"./index.1089a32e.js";import{L as s}from"./index.6aafccb6.js";import{h as d,j as c,d as f}from"./elements.f945da86.js";import{d as p,f as u}from"./shared.6d6b25a1.js";import{p as m,u as g,a as v,_ as h,b as x,c as b}from"./en-US.a408f614.js";import{_ as T,w as k}from"./IconSfc.576827a5.js";import{q as y,r as j,x as _,G as U,z as L,d as w,e as O,o as E,c as F,O as S,f as C,a as I,t as B,g as N,h as P,k as R,p as z,a2 as $,w as Q,F as q,i as A,j as D}from"./vendor.d2d73257.js";import{C as G}from"./index.2920c8b6.js";import{T as H,a as V}from"./index.349796c4.js";import{T as Z}from"./index.73e73cfb.js";import{T as J}from"./index.22a5407d.js";import"./index.0a5fd4c3.js";import"./index.84c7bbfb.js";import"./components.32b87c06.js";import"./index.52df4c80.js";import"./provide.f2b51248.js";import"./provide.c519cc18.js";import"./index.5f8141a5.js";const K={loading:{type:Boolean,default:!1},immediateCheck:{type:Boolean,default:!0},finished:{type:Boolean,default:!1},error:{type:Boolean,default:!1},offset:{type:[String,Number],default:0},loadingText:{type:String},finishedText:{type:String},errorText:{type:String},onLoad:{type:Function},"onUpdate:loading":{type:Function},"onUpdate:error":{type:Function}};const M=y({name:"VarList",directives:{Ripple:l},components:{[s.name]:s},props:K,setup(e){const t=j(null),a=j(null);let i=window;const o=()=>{var t,a,i;null==(t=e["onUpdate:error"])||t.call(e,!1),null==(a=e["onUpdate:loading"])||a.call(e,!0),null==(i=e.onLoad)||i.call(e)},n=async()=>{if(await L(),c(t.value))return;const{loading:n,finished:r,error:l}=e;n||r||l||!(()=>{const t=i===window?window.innerHeight:i.getBoundingClientRect().bottom,{bottom:o}=a.value.getBoundingClientRect();return o-f(e.offset)<=t})()||o()};return _((()=>{i=d(t.value),e.immediateCheck&&n(),i.addEventListener("scroll",n)})),U((()=>{i.removeEventListener("scroll",n)})),{pack:m,listEl:t,detectorEl:a,dt:p,isNumber:u,load:o,check:n}}}),W={class:"var-list var--box",ref:"listEl"},X={class:"var-list__loading"},Y={class:"var-list__loading-text"},ee={class:"var-list__finished"},te={class:"var-list__detector",ref:"detectorEl"};var ae=T(M,[["render",function(e,t,a,i,o,n){const r=w("var-loading"),l=O("ripple");return E(),F("div",W,[S(e.$slots,"default"),e.loading?S(e.$slots,"loading",{key:0},(()=>[I("div",X,[I("div",Y,B(e.dt(e.loadingText,e.pack.listLoadingText)),1),N(r,{size:"mini",radius:10})])])):C("v-if",!0),e.finished?S(e.$slots,"finished",{key:1},(()=>[I("div",ee,B(e.dt(e.finishedText,e.pack.listFinishedText)),1)])):C("v-if",!0),e.error?S(e.$slots,"error",{key:2},(()=>[P(I("div",{class:"var-list__error",onClick:t[0]||(t[0]=(...t)=>e.load&&e.load(...t))},[R(B(e.dt(e.errorText,e.pack.listErrorText)),1)],512),[[l]])])):C("v-if",!0),I("div",te,null,512)],512)}]]);ae.install=function(e){e.component(ae.name,ae)};const{add:ie,use:oe,pack:ne,packs:re,merge:le}=g(),se=e=>{b(e),oe(e)};v("zh-CN",h),v("en-US",x),ie("zh-CN",{basicUsage:"基本使用",loadFail:"加载失败",tipText:"提示文字",loadingText:"正在努力输出",errorText:"出错了出错了",finishedText:"一滴都没有了",listItem:"列表项"}),ie("en-US",{basicUsage:"Basic Usage",loadFail:"Load Fail",tipText:"Tip Text",loadingText:"loading QAQ",errorText:"error TNT",finishedText:"finished ORZ",listItem:"List Item"});var de=T({name:"ListExample",components:{[ae.name]:ae,[G.name]:G,[H.name]:H,[V.name]:V,[Z.name]:Z,[J.name]:J},setup(){const e=z({loading:!1,loading2:!1,loading3:!1,finished:!1,finished2:!1,finished3:!1,error:!1,list:[],list2:[],list3:[],current:0});return k(se),l=((e,t)=>{for(var a in t||(t={}))o.call(t,a)&&r(e,a,t[a]);if(i)for(var a of i(t))n.call(t,a)&&r(e,a,t[a]);return e})({pack:ne},$(e)),t(l,a({load(){setTimeout((()=>{for(let t=0;t<20;t++)e.list.push(e.list.length+1);e.loading=!1,e.list.length>=60&&(e.finished=!0)}),1e3)},load2(){setTimeout((()=>{if(40===e.list2.length)return e.error=!0,void(e.loading2=!1);for(let t=0;t<20;t++)e.list2.push(e.list2.length+1);e.loading2=!1}),1e3)},load3(){setTimeout((()=>{for(let t=0;t<20;t++)e.list3.push(e.list3.length+1);e.loading3=!1,e.list3.length>=60&&(e.finished3=!0)}),1e3)}}));var l}},[["render",function(e,t,a,i,o,n){const r=w("var-tab"),l=w("var-tabs"),s=w("var-cell"),d=w("var-list"),c=w("var-tab-item"),f=w("var-tabs-items");return E(),F(q,null,[N(l,{active:e.current,"onUpdate:active":t[0]||(t[0]=t=>e.current=t),sticky:"","offset-top":"50px",style:{"margin-bottom":"10px"}},{default:Q((()=>[N(r,null,{default:Q((()=>[R(B(i.pack.basicUsage),1)])),_:1}),N(r,null,{default:Q((()=>[R(B(i.pack.loadFail),1)])),_:1}),N(r,null,{default:Q((()=>[R(B(i.pack.tipText),1)])),_:1})])),_:1},8,["active"]),N(f,{active:e.current,"onUpdate:active":t[5]||(t[5]=t=>e.current=t)},{default:Q((()=>[N(c,null,{default:Q((()=>[N(d,{finished:e.finished,loading:e.loading,"onUpdate:loading":t[1]||(t[1]=t=>e.loading=t),onLoad:i.load},{default:Q((()=>[(E(!0),F(q,null,A(e.list,(e=>(E(),D(s,{key:e},{default:Q((()=>[R(B(i.pack.listItem)+": "+B(e),1)])),_:2},1024)))),128))])),_:1},8,["finished","loading","onLoad"])])),_:1}),N(c,null,{default:Q((()=>[N(d,{finished:e.finished2,error:e.error,"onUpdate:error":t[2]||(t[2]=t=>e.error=t),loading:e.loading2,"onUpdate:loading":t[3]||(t[3]=t=>e.loading2=t),onLoad:i.load2},{default:Q((()=>[(E(!0),F(q,null,A(e.list2,(e=>(E(),D(s,{key:e},{default:Q((()=>[R(B(i.pack.listItem)+": "+B(e),1)])),_:2},1024)))),128))])),_:1},8,["finished","error","loading","onLoad"])])),_:1}),N(c,null,{default:Q((()=>[N(d,{"loading-text":i.pack.loadingText,"finished-text":i.pack.finishedText,"error-text":i.pack.errorText,finished:e.finished3,loading:e.loading3,"onUpdate:loading":t[4]||(t[4]=t=>e.loading3=t),onLoad:i.load3},{default:Q((()=>[(E(!0),F(q,null,A(e.list3,(e=>(E(),D(s,{key:e},{default:Q((()=>[R(B(i.pack.listItem)+": "+B(e),1)])),_:2},1024)))),128))])),_:1},8,["loading-text","finished-text","error-text","finished","loading","onLoad"])])),_:1})])),_:1},8,["active"])],64)}]]);export{de as default};
