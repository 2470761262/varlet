var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,i=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t;import{A as s}from"./AppType.d0f8da8a.js";import{c as d,d as c,e as r,f as u}from"./components.fc1d8498.js";import{b as p}from"./shared.6d6b25a1.js";import{_ as m}from"./IconSfc.d1e88af2.js";import{q as v,b as f,y as b,o as h,c as _,O as g,z as V,r as y,d as k,a as C,i as x,v as S,m as j,l as E,t as O,h as T,p as U,a2 as w,w as I}from"./vendor.bac705d4.js";import{r as P}from"./elements.f945da86.js";import{I as A}from"./index.deaa662f.js";import{B as M}from"./index.9a216741.js";import{u as L,a as N,_ as B,b as H,c as $,d as z}from"./utils.a0011fda.js";import"./index.623f4af7.js";import"./index.6e8a3cbb.js";const D=Symbol("COLLAPSE_BIND_COLLAPSE_ITEM_KEY"),F=Symbol("COLLAPSE_COUNT_COLLAPSE_ITEM_KEY");const K=v({name:"VarCollapse",props:{modelValue:{type:[Array,String,Number]},accordion:{type:Boolean,default:!1},offset:{type:Boolean,default:!0},onChange:{type:Function},"onUpdate:modelValue":{type:Function}},setup(e){const{length:a,collapseItem:l,bindCollapseItem:t}=function(){const{bindChildren:e,childProviders:a}=d(D),{length:l}=c(F);return{length:l,collapseItem:a,bindCollapseItem:e}}(),o=f((()=>e.modelValue)),n=f((()=>e.offset)),i=()=>e.accordion||p(e.modelValue)?!e.accordion||!p(e.modelValue)||(console.error('[Varlet] Collapse: type of prop "modelValue" should be a String or Number'),!1):(console.error('[Varlet] Collapse: type of prop "modelValue" should be an Array'),!1),s=()=>{if(!i())return;const a=(()=>{if(e.accordion)return l.find((({name:a})=>e.modelValue===a.value));const a=l.filter((({name:a})=>void 0!==a.value&&e.modelValue.includes(a.value)));return a.length?a:void 0})()||(e.accordion?l.find((({index:a,name:l})=>void 0===l.value&&e.modelValue===a.value)):l.filter((({index:a,name:l})=>void 0===l.value&&e.modelValue.includes(a.value))));e.accordion&&!a||!e.accordion&&!a.length?l.forEach((a=>{a.init(e.accordion,!1)})):l.forEach((l=>{const t=e.accordion?a===l:a.includes(l);l.init(e.accordion,t)}))};t({active:o,offset:n,updateItem:(a,l)=>{var t,o;const n=((a,l)=>{if(i())return l?e.accordion?a:[...e.modelValue,a]:e.accordion?null:e.modelValue.filter((e=>e!==a))})(a,l);null==(t=e["onUpdate:modelValue"])||t.call(e,n),null==(o=e.onChange)||o.call(e,n)}}),b((()=>a.value),(()=>V().then(s))),b((()=>e.modelValue),(()=>V().then(s)))}}),Y={class:"var-collapse"};var q=m(K,[["render",function(e,a,l,t,o,n){return h(),_("div",Y,[g(e.$slots,"default")])}]]);q.install=function(e){e.component(q.name,q)};const W={name:{type:[String,Number]},title:{type:String},icon:{type:String,default:"chevron-down"},disabled:{type:Boolean,default:!1}};const G=v({name:"VarCollapseItem",components:{[A.name]:A},props:W,setup(e){const{index:a,collapse:l,bindCollapse:t}=function(){const{parentProvider:e,bindParent:a}=r(D),{index:l}=u(F);return{index:l,collapse:e,bindCollapse:a}}();if(!l||!t||!a)return void console.error("[Varlet] Collapse: <var-collapse-item/> must in <var-collapse>");const o=y(null),n=y(!1),i=y(!1),{active:s,offset:d,updateItem:c}=l,m=f((()=>e.name)),v=l=>{e.disabled||l||c(e.name||a.value,!i.value)};return t({index:a,name:m,init:(e,a)=>{void 0===s.value||e&&p(s.value)||a===i.value||(i.value=a,v(!0))}}),b(i,(e=>{e?o.value&&(o.value.style.height="",n.value=!0,V((()=>{const{offsetHeight:e}=o.value;o.value.style.height="0px",P((()=>{o.value.style.height=e+"px"}))}))):o.value&&(o.value.style.height="0px")})),{show:n,isShow:i,offset:d,toggle:v,contentEl:o,transitionend:()=>{i.value||(n.value=!1,o.value.style.height="")}}}}),J={class:"var-collapse-item-header__title"},Q={class:"var-collapse-item-header__icon"},R={class:"var-collapse-item__wrap"};var X=m(G,[["render",function(e,a,l,t,o,n){const i=k("var-icon");return h(),_("div",{class:j({"var-collapse-item":!0,"var-collapse-item__active":e.offset&&e.isShow,"var-collapse-item__disable":e.disabled})},[C("div",{class:"var-collapse-item-header",onClick:a[0]||(a[0]=a=>e.toggle())},[C("div",J,[g(e.$slots,"title",{},(()=>[E(O(e.title),1)]))]),C("div",Q,[g(e.$slots,"icon",{},(()=>[T(i,{name:e.icon,transition:400,class:j({"var-collapse-item-header__icon":!0,"var-collapse-item-header__open":e.isShow&&"chevron-down"===e.icon,"var-collapse-item-header__disable":e.disabled})},null,8,["name","class"])]))])]),x(C("div",{class:"var-collapse-item-content",ref:"contentEl",onTransitionend:a[1]||(a[1]=(...a)=>e.transitionend&&e.transitionend(...a))},[C("div",R,[g(e.$slots,"default")])],544),[[S,e.show]])],2)}]]);X.install=function(e){e.component(X.name,X)};const{add:Z,use:ee,pack:ae,packs:le,merge:te}=L(),oe=e=>{$(e),ee(e)};N("zh-CN",B),N("en-US",H),Z("zh-CN",{basicUsage:"基本使用",hideMargin:"隐藏边距",accordionMode:"手风琴模式",disabled:"禁用",enable:"启用",customContent:"自定义内容",title:"标题",text:"文本",slotTitle:"这是标题",slotContent:"这是内容"}),Z("en-US",{basicUsage:"Basic Usage",hideMargin:"Hide Margin",accordionMode:"Accordion Mode",disabled:"Disabled",enable:"Enable",customContent:"Custom Content",title:"Title",text:"Hello World",slotTitle:"This is a Title",slotContent:"This is a content"});const ne={name:"CollapseExample",components:{[q.name]:q,[X.name]:X,[M.name]:M,AppType:s},setup(){const e=U({disabled:!1,value:["1"],value1:"",value2:[1],value3:["1"],value4:["2"]});return z(oe),s=((e,a)=>{for(var l in a||(a={}))o.call(a,l)&&i(e,l,a[l]);if(t)for(var l of t(a))n.call(a,l)&&i(e,l,a[l]);return e})({},w(e)),a(s,l({pack:ae,changeHandle:e=>{console.log(e)}}));var s}},ie={class:"collapse-demo"},se=E("^_^");var de=m(ne,[["render",function(e,a,l,t,o,n){const i=k("app-type"),s=k("var-collapse-item"),d=k("var-collapse"),c=k("var-button");return h(),_("div",ie,[C("div",null,[T(i,null,{default:I((()=>[E(O(t.pack.basicUsage),1)])),_:1}),T(d,{modelValue:e.value,"onUpdate:modelValue":a[0]||(a[0]=a=>e.value=a),onChange:t.changeHandle},{default:I((()=>[T(s,{title:t.pack.title,name:"1"},{default:I((()=>[E(O(t.pack.text),1)])),_:1},8,["title"]),T(s,{title:t.pack.title,name:"2"},{default:I((()=>[E(O(t.pack.text),1)])),_:1},8,["title"])])),_:1},8,["modelValue","onChange"])]),C("div",null,[T(i,null,{default:I((()=>[E(O(t.pack.hideMargin),1)])),_:1}),T(d,{modelValue:e.value4,"onUpdate:modelValue":a[1]||(a[1]=a=>e.value4=a),offset:!1},{default:I((()=>[T(s,{title:t.pack.title,name:"1"},{default:I((()=>[E(O(t.pack.text),1)])),_:1},8,["title"]),T(s,{title:t.pack.title,name:"2"},{default:I((()=>[E(O(t.pack.text),1)])),_:1},8,["title"])])),_:1},8,["modelValue"])]),C("div",null,[T(i,null,{default:I((()=>[E(O(t.pack.accordionMode),1)])),_:1}),T(d,{modelValue:e.value1,"onUpdate:modelValue":a[2]||(a[2]=a=>e.value1=a),accordion:"",offset:!1},{default:I((()=>[T(s,{title:t.pack.title,name:"1"},{default:I((()=>[E(O(t.pack.text),1)])),_:1},8,["title"]),T(s,{title:t.pack.title,name:"2"},{default:I((()=>[E(O(t.pack.text),1)])),_:1},8,["title"])])),_:1},8,["modelValue"])]),C("div",null,[T(i,null,{default:I((()=>[E(O(t.pack.disabled),1)])),_:1}),T(c,{onClick:a[3]||(a[3]=a=>e.disabled=!e.disabled),style:{"margin-bottom":"8px"}},{default:I((()=>[E(O(e.disabled?t.pack.enable:t.pack.disabled),1)])),_:1}),T(d,{modelValue:e.value2,"onUpdate:modelValue":a[4]||(a[4]=a=>e.value2=a)},{default:I((()=>[T(s,{title:t.pack.title,name:1,disabled:e.disabled},{default:I((()=>[E(O(t.pack.text),1)])),_:1},8,["title","disabled"]),T(s,{title:t.pack.title,name:2,disabled:e.disabled},{default:I((()=>[E(O(t.pack.text),1)])),_:1},8,["title","disabled"])])),_:1},8,["modelValue"])]),C("div",null,[T(i,null,{default:I((()=>[E(O(t.pack.customContent),1)])),_:1}),T(d,{modelValue:e.value3,"onUpdate:modelValue":a[5]||(a[5]=a=>e.value3=a)},{default:I((()=>[T(s,{title:t.pack.slotTitle,name:"1",icon:"account-circle"},{default:I((()=>[E(O(t.pack.text),1)])),_:1},8,["title"]),T(s,{name:"2"},{title:I((()=>[E(O(t.pack.slotTitle),1)])),icon:I((()=>[se])),default:I((()=>[E(" "+O(t.pack.slotContent),1)])),_:1})])),_:1},8,["modelValue"])])])}]]);export{de as default};
