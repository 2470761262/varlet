var H=Object.defineProperty,O=Object.defineProperties;var P=Object.getOwnPropertyDescriptors;var x=Object.getOwnPropertySymbols;var Q=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable;var C=(e,t,n)=>t in e?H(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,j=(e,t)=>{for(var n in t||(t={}))Q.call(t,n)&&C(e,n,t[n]);if(x)for(var n of x(t))Z.call(t,n)&&C(e,n,t[n]);return e},B=(e,t)=>O(e,P(t));import{R as q}from"./index.20a388b7.js";import{L as E}from"./index.4f8cd6be.js";import{Z as G,z as M,k as J,_ as N,$ as K,L as W}from"./elevation.357f91b7.js";import{p as X,u as Y,a as w,_ as ee,b as te,c as ae,w as ie}from"./en-US.f7db19e4.js";import{q as ne,r as S,x as oe,G as se,z as le,d as c,e as re,o as m,c as v,O as b,f as L,a as p,t as l,h as r,i as de,l as g,p as ue,a2 as fe,w as o,F as _,j as F,k as U}from"./vendor.cfbfc887.js";import{C as A}from"./index.88213fcd.js";import{T as I,a as z}from"./index.1c03d832.js";import{T as D}from"./index.cdea9e1d.js";import{T as R}from"./index.80f20b5f.js";import"./index.e6af7bd9.js";import"./index.5bc3cf93.js";import"./components.190b2d1b.js";import"./index.e194e8c9.js";import"./provide.18b79679.js";import"./provide.439388a1.js";import"./index.32d3eb8a.js";const me={loading:{type:Boolean,default:!1},immediateCheck:{type:Boolean,default:!0},finished:{type:Boolean,default:!1},error:{type:Boolean,default:!1},offset:{type:[String,Number],default:0},loadingText:{type:String},finishedText:{type:String},errorText:{type:String},onLoad:{type:Function},"onUpdate:loading":{type:Function},"onUpdate:error":{type:Function}};const ce=ne({name:"VarList",directives:{Ripple:q},components:{[E.name]:E},props:me,setup(e){const t=S(null),n=S(null);let i=window;const T=()=>{var u,s,f;(u=e["onUpdate:error"])==null||u.call(e,!1),(s=e["onUpdate:loading"])==null||s.call(e,!0),(f=e.onLoad)==null||f.call(e)},k=()=>{const u=i===window?window.innerHeight:i.getBoundingClientRect().bottom,{bottom:s}=n.value.getBoundingClientRect();return s-W(e.offset)<=u},d=async()=>{if(await le(),K(t.value))return;const{loading:u,finished:s,error:f}=e;!u&&!s&&!f&&k()&&T()};return oe(()=>{i=G(t.value),e.immediateCheck&&d(),i.addEventListener("scroll",d)}),se(()=>{i.removeEventListener("scroll",d)}),{pack:X,listEl:t,detectorEl:n,dt:M,isNumber:J,load:T,check:d}}}),ge={class:"var-list var--box",ref:"listEl"},ve={class:"var-list__loading"},pe={class:"var-list__loading-text"},he={class:"var-list__finished"},Te={class:"var-list__detector",ref:"detectorEl"};function be(e,t,n,i,T,k){const d=c("var-loading"),u=re("ripple");return m(),v("div",ge,[b(e.$slots,"default"),e.loading?b(e.$slots,"loading",{key:0},()=>[p("div",ve,[p("div",pe,l(e.dt(e.loadingText,e.pack.listLoadingText)),1),r(d,{size:"mini",radius:10})])]):L("v-if",!0),e.finished?b(e.$slots,"finished",{key:1},()=>[p("div",he,l(e.dt(e.finishedText,e.pack.listFinishedText)),1)]):L("v-if",!0),e.error?b(e.$slots,"error",{key:2},()=>[de(p("div",{class:"var-list__error",onClick:t[0]||(t[0]=(...s)=>e.load&&e.load(...s))},[g(l(e.dt(e.errorText,e.pack.listErrorText)),1)],512),[[u]])]):L("v-if",!0),p("div",Te,null,512)],512)}var h=N(ce,[["render",be]]);h.install=function(e){e.component(h.name,h)};var _e={basicUsage:"\u57FA\u672C\u4F7F\u7528",loadFail:"\u52A0\u8F7D\u5931\u8D25",tipText:"\u63D0\u793A\u6587\u5B57",loadingText:"\u6B63\u5728\u52AA\u529B\u8F93\u51FA",errorText:"\u51FA\u9519\u4E86\u51FA\u9519\u4E86",finishedText:"\u4E00\u6EF4\u90FD\u6CA1\u6709\u4E86",listItem:"\u5217\u8868\u9879"},ke={basicUsage:"Basic Usage",loadFail:"Load Fail",tipText:"Tip Text",loadingText:"loading QAQ",errorText:"error TNT",finishedText:"finished ORZ",listItem:"List Item"};const{add:$,use:ye,pack:Le,packs:Qe,merge:Ze}=Y(),Fe=e=>{ae(e),ye(e)};w("zh-CN",ee);w("en-US",te);$("zh-CN",_e);$("en-US",ke);const Ue={name:"ListExample",components:{[h.name]:h,[A.name]:A,[I.name]:I,[z.name]:z,[D.name]:D,[R.name]:R},setup(){const e=ue({loading:!1,loading2:!1,loading3:!1,finished:!1,finished2:!1,finished3:!1,error:!1,list:[],list2:[],list3:[],current:0});return ie(Fe),B(j({pack:Le},fe(e)),{load(){setTimeout(()=>{for(let t=0;t<20;t++)e.list.push(e.list.length+1);e.loading=!1,e.list.length>=60&&(e.finished=!0)},1e3)},load2(){setTimeout(()=>{if(e.list2.length===40){e.error=!0,e.loading2=!1;return}for(let t=0;t<20;t++)e.list2.push(e.list2.length+1);e.loading2=!1},1e3)},load3(){setTimeout(()=>{for(let t=0;t<20;t++)e.list3.push(e.list3.length+1);e.loading3=!1,e.list3.length>=60&&(e.finished3=!0)},1e3)}})}};function xe(e,t,n,i,T,k){const d=c("var-tab"),u=c("var-tabs"),s=c("var-cell"),f=c("var-list"),y=c("var-tab-item"),V=c("var-tabs-items");return m(),v(_,null,[r(u,{active:e.current,"onUpdate:active":t[0]||(t[0]=a=>e.current=a),sticky:"","offset-top":"50px",style:{"margin-bottom":"10px"}},{default:o(()=>[r(d,null,{default:o(()=>[g(l(i.pack.basicUsage),1)]),_:1}),r(d,null,{default:o(()=>[g(l(i.pack.loadFail),1)]),_:1}),r(d,null,{default:o(()=>[g(l(i.pack.tipText),1)]),_:1})]),_:1},8,["active"]),r(V,{active:e.current,"onUpdate:active":t[5]||(t[5]=a=>e.current=a)},{default:o(()=>[r(y,null,{default:o(()=>[r(f,{finished:e.finished,loading:e.loading,"onUpdate:loading":t[1]||(t[1]=a=>e.loading=a),onLoad:i.load},{default:o(()=>[(m(!0),v(_,null,F(e.list,a=>(m(),U(s,{key:a},{default:o(()=>[g(l(i.pack.listItem)+": "+l(a),1)]),_:2},1024))),128))]),_:1},8,["finished","loading","onLoad"])]),_:1}),r(y,null,{default:o(()=>[r(f,{finished:e.finished2,error:e.error,"onUpdate:error":t[2]||(t[2]=a=>e.error=a),loading:e.loading2,"onUpdate:loading":t[3]||(t[3]=a=>e.loading2=a),onLoad:i.load2},{default:o(()=>[(m(!0),v(_,null,F(e.list2,a=>(m(),U(s,{key:a},{default:o(()=>[g(l(i.pack.listItem)+": "+l(a),1)]),_:2},1024))),128))]),_:1},8,["finished","error","loading","onLoad"])]),_:1}),r(y,null,{default:o(()=>[r(f,{"loading-text":i.pack.loadingText,"finished-text":i.pack.finishedText,"error-text":i.pack.errorText,finished:e.finished3,loading:e.loading3,"onUpdate:loading":t[4]||(t[4]=a=>e.loading3=a),onLoad:i.load3},{default:o(()=>[(m(!0),v(_,null,F(e.list3,a=>(m(),U(s,{key:a},{default:o(()=>[g(l(i.pack.listItem)+": "+l(a),1)]),_:2},1024))),128))]),_:1},8,["loading-text","finished-text","error-text","finished","loading","onLoad"])]),_:1})]),_:1},8,["active"])],64)}var qe=N(Ue,[["render",xe]]);export{qe as default};
