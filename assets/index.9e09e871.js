import{I as O}from"./index.ef3db56c.js";import{R as A}from"./index.20a388b7.js";import{F as p,u as T}from"./provide.4176b2d5.js";import{b as $,e as j,a as I,f as F,u as G}from"./components.092cc01a.js";import{_ as Y}from"./IconSfc.8e5067c1.js";import{q as W,r as K,b as S,y as q,d as z,e as J,o as L,c as Q,a as b,i as Z,m as u,n as ee,O as C,h as f,z as ae}from"./vendor.cfbfc887.js";const P=Symbol("CHECKBOX_GROUP_BIND_CHECKBOX_KEY"),R=Symbol("CHECKBOX_GROUP_COUNT_CHECKBOX_KEY");function ke(){const{bindChildren:e,childProviders:n}=$(P),{length:r}=j(R);return{length:r,checkboxes:n,bindCheckboxes:e}}const oe={modelValue:{default:!1},checkedValue:{default:!0},uncheckedValue:{default:!1},checkedColor:{type:String},uncheckedColor:{type:String},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},iconSize:{type:[String,Number]},ripple:{type:Boolean,default:!0},validateTrigger:{type:Array,default:["onChange"]},rules:{type:Array},onClick:{type:Function},onChange:{type:Function},"onUpdate:modelValue":{type:Function}};function ne(){const{bindParent:e,parentProvider:n}=I(P),{index:r}=F(R);return{index:r,checkboxGroup:n,bindCheckboxGroup:e}}const ce=W({name:"VarCheckbox",directives:{Ripple:A},components:{[O.name]:O,[p.name]:p},props:oe,setup(e){const n=K(!1),r=S(()=>n.value===e.checkedValue),V=S(()=>e.checkedValue),h=K(!1),{checkboxGroup:c,bindCheckboxGroup:t}=ne(),{form:o,bindForm:d}=T(),{errorMessage:k,validateWithTrigger:U,validate:x,resetValidation:v}=G(),D=a=>{ae(()=>{const{validateTrigger:l,rules:s,modelValue:i}=e;U(l,a,s,i)})},g=a=>{var i;n.value=a;const{checkedValue:l,onChange:s}=e;(i=e["onUpdate:modelValue"])==null||i.call(e,n.value),s==null||s(n.value),D("onChange"),a===l?c==null||c.onChecked(l):c==null||c.onUnchecked(l)},w=a=>{const{disabled:l,readonly:s,checkedValue:i,uncheckedValue:N,onClick:m}=e;if((o==null?void 0:o.disabled.value)||l||(m==null||m(a),(o==null?void 0:o.readonly.value)||s))return;h.value=!0;const X=c?c.checkedCount.value>=Number(c.max.value):!1;!r.value&&X||g(r.value?N:i)},H=a=>{const{checkedValue:l,uncheckedValue:s}=e;n.value=a.includes(l)?l:s},_=()=>{var a;(a=e["onUpdate:modelValue"])==null||a.call(e,e.uncheckedValue),v()},M=a=>{const{checkedValue:l,uncheckedValue:s}=e;![l,s].includes(a)&&(a=r.value?s:l),g(a)},B=()=>x(e.rules,e.modelValue);q(()=>e.modelValue,a=>{n.value=a},{immediate:!0});const E={checkedValue:V,checked:r,sync:H,validate:B,resetValidation:v,reset:_};return t==null||t(E),d==null||d(E),{withAnimation:h,checked:r,errorMessage:k,checkboxGroupErrorMessage:c==null?void 0:c.errorMessage,formDisabled:o==null?void 0:o.disabled,formReadonly:o==null?void 0:o.readonly,handleClick:w,toggle:M,reset:_,validate:B,resetValidation:v}}}),le={class:"var-checkbox"};function se(e,n,r,V,h,c){const t=z("var-icon"),o=z("var-form-details"),d=J("ripple");return L(),Q("div",{class:"var-checkbox__wrap",onClick:n[0]||(n[0]=(...k)=>e.handleClick&&e.handleClick(...k))},[b("div",le,[Z(b("div",{class:u(["var-checkbox__action",[e.checked?"var-checkbox--checked":"var-checkbox--unchecked",e.errorMessage||e.checkboxGroupErrorMessage?"var-checkbox--error":null,e.formDisabled||e.disabled?"var-checkbox--disabled":null]]),style:ee({color:e.checked?e.checkedColor:e.uncheckedColor})},[e.checked?C(e.$slots,"checked-icon",{key:0},()=>[f(t,{class:u(["var-checkbox__icon",[e.withAnimation?"var-checkbox--with-animation":null]]),name:"checkbox-marked",size:e.iconSize,"var-checkbox-cover":""},null,8,["class","size"])]):C(e.$slots,"unchecked-icon",{key:1},()=>[f(t,{class:u(["var-checkbox__icon",[e.withAnimation?"var-checkbox--with-animation":null]]),name:"checkbox-blank-outline",size:e.iconSize,"var-checkbox-cover":""},null,8,["class","size"])])],6),[[d,{disabled:e.formReadonly||e.readonly||e.formDisabled||e.disabled||!e.ripple}]]),b("div",{class:u(["var-checkbox__text",[e.errorMessage||e.checkboxGroupErrorMessage?"var-checkbox--error":null,e.formDisabled||e.disabled?"var-checkbox--disabled":null]])},[C(e.$slots,"default")],2)]),f(o,{"error-message":e.errorMessage},null,8,["error-message"])])}var y=Y(ce,[["render",se]]);y.install=function(e){e.component(y.name,y)};export{y as C,ke as u};
