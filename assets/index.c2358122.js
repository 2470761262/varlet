import{F as b,u as z}from"./provide.ba79f650.js";import{u as F}from"./components.092cc01a.js";import{u as S}from"./index.f332b0f9.js";import{u as x}from"./shared.5973ad73.js";import{_ as B}from"./IconSfc.394079fb.js";import{q as E,b as s,y as C,d as N,o as q,c as w,a as W,O as D,m as I,h as O,z as P}from"./vendor.cfbfc887.js";function H(e){return["horizontal","vertical"].includes(e)}const J={modelValue:{type:Array,default:()=>[]},max:{type:[String,Number]},direction:{type:String,default:"horizontal",validator:H},validateTrigger:{type:Array,default:["onChange"]},rules:{type:Array},onChange:{type:Function},"onUpdate:modelValue":{type:Function}};const K=E({name:"VarCheckboxGroup",components:{[b.name]:b},props:J,setup(e){const i=s(()=>e.max),u=s(()=>e.modelValue.length),{length:m,checkboxes:r,bindCheckboxes:h}=S(),{bindForm:c}=z(),{errorMessage:f,validateWithTrigger:y,validate:j,resetValidation:l}=F(),U=s(()=>f.value),$=a=>{P(()=>{const{validateTrigger:t,rules:o,modelValue:n}=e;y(t,a,o,n)})},v=a=>{var t,o;(t=e["onUpdate:modelValue"])==null||t.call(e,a),(o=e.onChange)==null||o.call(e,a),$("onChange")},A=a=>{const{modelValue:t}=e;t.includes(a)||v([...t,a])},G=a=>{const{modelValue:t}=e;!t.includes(a)||v(t.filter(o=>o!==a))},g=()=>r.forEach(({sync:a})=>a(e.modelValue)),M=()=>{var o;const a=r.map(({checkedValue:n})=>n.value),t=x(a);return(o=e["onUpdate:modelValue"])==null||o.call(e,t),t},T=()=>{var o;const a=r.filter(({checked:n})=>!n.value).map(({checkedValue:n})=>n.value),t=x(a);return(o=e["onUpdate:modelValue"])==null||o.call(e,t),t},k=()=>{var a;(a=e["onUpdate:modelValue"])==null||a.call(e,[]),l()},_=()=>j(e.rules,e.modelValue);C(()=>e.modelValue,g,{deep:!0}),C(()=>m.value,g);const V={max:i,checkedCount:u,onChecked:A,onUnchecked:G,validate:_,resetValidation:l,reset:k,errorMessage:U};return h(V),c==null||c(V),{errorMessage:f,checkAll:M,inverseAll:T,reset:k,validate:_,resetValidation:l}}}),L={class:"var-checkbox-group__wrap"};function Q(e,i,u,m,r,h){const c=N("var-form-details");return q(),w("div",L,[W("div",{class:I(["var-checkbox-group",[`var-checkbox-group--${e.direction}`]])},[D(e.$slots,"default")],2),O(c,{"error-message":e.errorMessage},null,8,["error-message"])])}var d=B(K,[["render",Q]]);d.install=function(e){e.component(d.name,d)};export{d as C};
