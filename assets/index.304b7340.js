var e=Object.defineProperty,n=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,o=(n,t,a)=>t in n?e(n,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[t]=a,r=(e,r)=>{for(var s in r||(r={}))t.call(r,s)&&o(e,s,r[s]);if(n)for(var s of n(r))a.call(r,s)&&o(e,s,r[s]);return e};import{q as s,r as i,b as c,y as l,x as p,d,i as u,v as f,o as v,c as m,a as b,m as y,O as k,k as g,f as w,n as S,l as h,t as O,h as C,w as _,P as j,T as x,Q as z,p as I,N as E,a6 as $}from"./vendor.85536c59.js";import{p as A,L as F}from"./index.dbaa2483.js";import{B as L}from"./index.b796b581.js";import{I as T}from"./index.5f8c0dc7.js";import{u as B}from"./zIndex.aaf01d58.js";import{p as N,u as P,m as U}from"./components.0481fe69.js";import{_ as V}from"./IconSfc.fde87e76.js";import{c as q}from"./index.b3b1e3ce.js";import{a as M,t as Q}from"./shared.6d6b25a1.js";import{u as D}from"./lock.edc22e33.js";const G={type:{type:String,validator:function(e){return X.includes(e)}},position:{type:String,default:"top",validator:function(e){return["top","center","bottom"].includes(e)}},content:{type:String},contentClass:{type:String},duration:{type:Number,default:3e3},vertical:{type:Boolean,default:!1},loadingType:N(A,"type"),loadingSize:N(A,"size"),lockScroll:{type:Boolean,default:!1},show:{type:Boolean,default:!1},teleport:{default:"body"},forbidClick:{type:Boolean,default:!1},onOpen:{type:Function,default:()=>{}},onOpened:{type:Function,default:()=>{}},onClose:{type:Function,default:()=>{}},onClosed:{type:Function,default:()=>{}},"onUpdate:show":{type:Function},_update:{type:String}};const H={success:"checkbox-marked-circle",warning:"warning",info:"information",error:"error",loading:""},J=s({name:"VarSnackbarCore",components:{[F.name]:F,[L.name]:L,[T.name]:T},props:G,setup(e){const n=i(null),{zIndex:t}=B((()=>e.show),1);D(e,"show","lockScroll");const a=c((()=>{const{position:n,vertical:t,type:a}=e;return`${`var-snackbar__wrapper var-snackbar__wrapper-${n} var-elevation--4`}${t?" var-snackbar__vertical":""}${a&&X.includes(a)?` var-snackbar__wrapper-${a}`:""}`})),o=c((()=>"loading"===e.type||e.forbidClick)),r=c((()=>e.type?H[e.type]:"")),s=()=>{n.value=setTimeout((()=>{var n;"loading"!==e.type&&(null==(n=e["onUpdate:show"])||n.call(e,!1))}),e.duration)};return l((()=>e.show),(t=>{var a,o;t?(null==(a=e.onOpen)||a.call(e),s()):!1===t&&(clearTimeout(n.value),null==(o=e.onClose)||o.call(e))})),l((()=>e._update),(()=>{clearTimeout(n.value),s()})),p((()=>{var n;e.show&&(null==(n=e.onOpen)||n.call(e),s())})),{zIndex:t,snackbarClass:a,iconName:r,isForbidClick:o}}}),K={class:"var-snackbar__action"};var R=V(J,[["render",function(e,n,t,a,o,r){const s=d("var-icon"),i=d("var-loading");return u((v(),m("div",{class:"var-snackbar",style:S({pointerEvents:e.isForbidClick?"auto":"none",zIndex:e.zIndex})},[b("div",{class:y(e.snackbarClass),style:S({zIndex:e.zIndex})},[b("div",{class:y(["var-snackbar__content",[e.contentClass]])},[k(e.$slots,"default",{},(()=>[h(O(e.content),1)]))],2),b("div",K,[e.iconName?(v(),g(s,{key:0,name:e.iconName},null,8,["name"])):w("v-if",!0),"loading"===e.type?(v(),g(i,{key:1,type:e.loadingType,size:e.loadingSize},null,8,["type","size"])):w("v-if",!0),k(e.$slots,"action")])],6)],4)),[[f,e.show]])}]]);var W=V(s({name:"VarSnackbar",components:{VarSnackbarCore:R},props:G,setup(){const{disabled:e}=P();return{disabled:e}}}),[["render",function(e,n,t,a,o,r){const s=d("var-snackbar-core");return v(),g(z,{to:e.teleport,disabled:e.disabled},[C(x,{name:"var-snackbar-fade",onAfterEnter:e.onOpened,onAfterLeave:e.onClosed},{default:_((()=>[C(s,j(e.$props,{class:"var-snackbar-transition"}),{action:_((()=>[k(e.$slots,"action")])),default:_((()=>[k(e.$slots,"default",{},(()=>[h(O(e.content),1)]))])),_:3},16)])),_:3},8,["onAfterEnter","onAfterLeave"])],8,["to","disabled"])}]]);const X=["loading","success","warning","info","error"];let Y,Z=0,ee=!1,ne=!1,te=I([]);const ae={type:void 0,content:"",position:"top",duration:3e3,vertical:!1,contentClass:void 0,loadingType:"circle",loadingSize:"normal",lockScroll:!1,teleport:"body",forbidClick:!1,onOpen:()=>{},onOpened:()=>{},onClose:()=>{},onClosed:()=>{}},oe={name:"var-snackbar-fade",tag:"div",class:"var-transition-group"},re={setup:()=>()=>{const e=te.map((({id:e,reactiveSnackOptions:n,_update:t})=>{const a=document.querySelector(".var-transition-group");n.forbidClick||"loading"===n.type?a.classList.add("var-pointer-auto"):a.classList.remove("var-pointer-auto"),ne&&(n.position="top");const o=r({position:ne?"relative":"absolute"},function(e="top"){return"bottom"===e?{[e]:"5%"}:{top:"top"===e?"5%":"45%"}}(n.position));return C(R,j(n,{key:e,style:o,"data-id":e,_update:t,show:n.show,"onUpdate:show":e=>n.show=e}),null)}));return C($,j(oe,{style:{zIndex:q.zIndex},onAfterEnter:ie,onAfterLeave:ce}),"function"==typeof(n=e)||"[object Object]"===Object.prototype.toString.call(n)&&!E(n)?e:{default:()=>[e]});var n}},se=function(e){const n=M(e)?e:{content:e},t=I(r(r({},ae),n));t.show=!0,ee||(ee=!0,Y=U(re).unmountInstance);const{length:a}=te,o={id:Z++,reactiveSnackOptions:t};if(0===a||ne)!function(e){te.push(e)}(o);else{!function(e,n){const[t]=te;t.reactiveSnackOptions=r(r({},t.reactiveSnackOptions),e),t._update=n}(t,`update-${Z}`)}return{clear(){!ne&&te.length?te[0].reactiveSnackOptions.show=!1:t.show=!1}}};function ie(e){var n,t;const a=e.getAttribute("data-id"),o=te.find((e=>e.id===Q(a)));o&&(null==(t=(n=o.reactiveSnackOptions).onOpened)||t.call(n))}function ce(e){var n,t;e.parentElement&&e.parentElement.classList.remove("var-pointer-auto");const a=e.getAttribute("data-id"),o=te.find((e=>e.id===Q(a)));o&&(o.animationEnd=!0,null==(t=(n=o.reactiveSnackOptions).onClosed)||t.call(n));te.every((e=>e.animationEnd))&&(null==Y||Y(),te=I([]),ee=!1)}X.forEach((e=>{se[e]=n=>(M(n)?n.type=e:n={content:n,type:e},se(n))})),se.install=function(e){e.component(W.name,W)},se.allowMultiple=function(e=!1){e!==ne&&(te.forEach((e=>{e.reactiveSnackOptions.show=!1})),ne=e)},se.clear=function(){te.forEach((e=>{e.reactiveSnackOptions.show=!1}))},se.Component=W,W.install=function(e){e.component(W.name,W)};var le=se;export{le as S};
