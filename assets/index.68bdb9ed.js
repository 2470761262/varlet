import{q as g,r as s,y as v,x as z,G as C,o as p,c as S,O as h,k as $,h as E,w as L,i as M,v as b,a as U,n as B,V as F,T as I,Q as T}from"./vendor.cfbfc887.js";import{l as A,_ as N,n as w,o as V}from"./elevation.357f91b7.js";import{u as j}from"./zIndex.a6f89f9c.js";function O(e){return["top","bottom"].includes(e)}const X={show:{type:Boolean,default:!1},alignment:{type:String,default:"top",validator:O},offsetX:{type:[Number,String],default:0},offsetY:{type:[Number,String],default:0},teleport:{default:"body"},onOpen:{type:Function},onOpened:{type:Function},onClose:{type:Function},onClosed:{type:Function},"onUpdate:show":{type:Function}};const Y=g({name:"VarMenu",props:X,setup(e){const n=s(null),l=s(null),i=s(0),r=s(0),{zIndex:c}=j(()=>e.show,1);let a=!1;const y=t=>t==="top"?w(n.value):w(n.value)-l.value.offsetHeight,k=()=>{a=!0},m=()=>{var t;if(a){a=!1;return}!e.show||(t=e["onUpdate:show"])==null||t.call(e,!1)},o=()=>{i.value=y(e.alignment),r.value=V(n.value)};return v(()=>e.alignment,o),v(()=>e.show,async t=>{const{onOpen:u,onClose:f}=e;t&&o(),t?u==null||u():f==null||f()}),z(()=>{o(),document.addEventListener("click",m),window.addEventListener("resize",o)}),C(()=>{document.removeEventListener("click",m),window.removeEventListener("resize",o)}),{zIndex:c,host:n,menu:l,top:i,left:r,toSizeUnit:A,handleClick:k,resize:o}}});function q(e,n,l,i,r,c){return p(),S("div",{class:"var-menu",ref:"host",onClick:n[1]||(n[1]=(...a)=>e.handleClick&&e.handleClick(...a))},[h(e.$slots,"default"),(p(),$(T,{to:e.teleport},[E(I,{name:"var-menu",onAfterEnter:e.onOpened,onAfterLeave:e.onClosed},{default:L(()=>[M(U("div",{class:"var-menu__menu var-elevation--3",ref:"menu",style:B({top:`calc(${e.top}px + ${e.toSizeUnit(e.offsetY)})`,left:`calc(${e.left}px + ${e.toSizeUnit(e.offsetX)})`,zIndex:e.zIndex}),onClick:n[0]||(n[0]=F(()=>{},["stop"]))},[h(e.$slots,"menu")],4),[[b,e.show]])]),_:3},8,["onAfterEnter","onAfterLeave"])],8,["to"]))],512)}var d=N(Y,[["render",q]]);d.install=function(e){e.component(d.name,d)};export{d as M};
