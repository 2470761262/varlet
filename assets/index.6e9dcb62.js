import{I as e}from"./index.0a5fd4c3.js";import{R as a}from"./index.1089a32e.js";import{F as o,u as l}from"./provide.e8bd35bb.js";import{c,d as n,e as r,f as s,b as d}from"./components.32b87c06.js";import{_ as i}from"./IconSfc.576827a5.js";import{q as t,r as u,b as h,y as k,d as b,e as v,o as m,c as p,a as x,h as f,m as C,n as g,O as y,g as V,z as _}from"./vendor.d2d73257.js";const E=Symbol("CHECKBOX_GROUP_BIND_CHECKBOX_KEY"),G=Symbol("CHECKBOX_GROUP_COUNT_CHECKBOX_KEY");function M(){const{bindChildren:e,childProviders:a}=c(E),{length:o}=n(G);return{length:o,checkboxes:a,bindCheckboxes:e}}const S={modelValue:{default:!1},checkedValue:{default:!0},uncheckedValue:{default:!1},checkedColor:{type:String},uncheckedColor:{type:String},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},iconSize:{type:[String,Number]},ripple:{type:Boolean,default:!0},validateTrigger:{type:Array,default:["onChange"]},rules:{type:Array},onClick:{type:Function},onChange:{type:Function},"onUpdate:modelValue":{type:Function}};const z=t({name:"VarCheckbox",directives:{Ripple:a},components:{[e.name]:e,[o.name]:o},props:S,setup(e){const a=u(!1),o=h((()=>a.value===e.checkedValue)),c=h((()=>e.checkedValue)),n=u(!1),{checkboxGroup:i,bindCheckboxGroup:t}=function(){const{bindParent:e,parentProvider:a}=r(E),{index:o}=s(G);return{index:o,checkboxGroup:a,bindCheckboxGroup:e}}(),{form:b,bindForm:v}=l(),{errorMessage:m,validateWithTrigger:p,validate:x,resetValidation:f}=d(),C=o=>{var l;a.value=o;const{checkedValue:c,onChange:n}=e;var r;null==(l=e["onUpdate:modelValue"])||l.call(e,a.value),null==n||n(a.value),r="onChange",_((()=>{const{validateTrigger:a,rules:o,modelValue:l}=e;p(a,r,o,l)})),o===c?null==i||i.onChecked(c):null==i||i.onUnchecked(c)},g=()=>{var a;null==(a=e["onUpdate:modelValue"])||a.call(e,e.uncheckedValue),f()},y=()=>x(e.rules,e.modelValue);k((()=>e.modelValue),(e=>{a.value=e}),{immediate:!0});const V={checkedValue:c,checked:o,sync:o=>{const{checkedValue:l,uncheckedValue:c}=e;a.value=o.includes(l)?l:c},validate:y,resetValidation:f,reset:g};return null==t||t(V),null==v||v(V),{withAnimation:n,checked:o,errorMessage:m,checkboxGroupErrorMessage:null==i?void 0:i.errorMessage,formDisabled:null==b?void 0:b.disabled,formReadonly:null==b?void 0:b.readonly,handleClick:a=>{const{disabled:l,readonly:c,checkedValue:r,uncheckedValue:s,onClick:d}=e;if((null==b?void 0:b.disabled.value)||l)return;if(null==d||d(a),(null==b?void 0:b.readonly.value)||c)return;n.value=!0;const t=!!i&&i.checkedCount.value>=Number(i.max.value);!o.value&&t||C(o.value?s:r)},toggle:a=>{const{checkedValue:l,uncheckedValue:c}=e;![l,c].includes(a)&&(a=o.value?c:l),C(a)},reset:g,validate:y,resetValidation:f}}}),B={class:"var-checkbox"};var O=i(z,[["render",function(e,a,o,l,c,n){const r=b("var-icon"),s=b("var-form-details"),d=v("ripple");return m(),p("div",{class:"var-checkbox__wrap",onClick:a[0]||(a[0]=(...a)=>e.handleClick&&e.handleClick(...a))},[x("div",B,[f(x("div",{class:C(["var-checkbox__action",[e.checked?"var-checkbox--checked":"var-checkbox--unchecked",e.errorMessage||e.checkboxGroupErrorMessage?"var-checkbox--error":null,e.formDisabled||e.disabled?"var-checkbox--disabled":null]]),style:g({color:e.checked?e.checkedColor:e.uncheckedColor})},[e.checked?y(e.$slots,"checked-icon",{key:0},(()=>[V(r,{class:C(["var-checkbox__icon",[e.withAnimation?"var-checkbox--with-animation":null]]),name:"checkbox-marked",size:e.iconSize,"var-checkbox-cover":""},null,8,["class","size"])])):y(e.$slots,"unchecked-icon",{key:1},(()=>[V(r,{class:C(["var-checkbox__icon",[e.withAnimation?"var-checkbox--with-animation":null]]),name:"checkbox-blank-outline",size:e.iconSize,"var-checkbox-cover":""},null,8,["class","size"])]))],6),[[d,{disabled:e.formReadonly||e.readonly||e.formDisabled||e.disabled||!e.ripple}]]),x("div",{class:C(["var-checkbox__text",[e.errorMessage||e.checkboxGroupErrorMessage?"var-checkbox--error":null,e.formDisabled||e.disabled?"var-checkbox--disabled":null]])},[y(e.$slots,"default")],2)]),V(s,{"error-message":e.errorMessage},null,8,["error-message"])])}]]);O.install=function(e){e.component(O.name,O)};export{O as C,M as u};
