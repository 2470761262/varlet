import{I as L}from"./index.d0776ff2.js";import{h as P,c as M}from"./elements.fbcbc1e3.js";import{t as y}from"./shared.2d2ec151.js";import{_ as b}from"./elevation.61c5e873.js";import{q as U,r as u,b as _,y as x,x as C,d as g,o as p,c as T,a as A,h as F,m as w,n as O,B as z,U as Y,k as N,w as R,j as q,l as X,t as G,F as H}from"./vendor.7d218dee.js";import{C as V}from"./index.1acf48e0.js";const J={modelValue:{type:Boolean},disabled:{type:Boolean,default:!1},animationDuration:{type:[Number,String],default:300},successDuration:{type:[Number,String],default:2e3},bgColor:{type:String},successBgColor:{type:String},color:{type:String},successColor:{type:String},onRefresh:{type:Function},"onUpdate:modelValue":{type:Function}};const v=100,f=-50;let D=window;const K=U({name:"VarPullRefresh",components:{VarIcon:L},props:J,setup(e){const o=u(null),c=u(0),t=u(f),l=u("arrow-down"),n=u("default"),r=u(!1),a=_(()=>n.value!=="loading"&&n.value!=="success"&&!e.disabled),i=_(()=>({"var-pull-refresh__icon":!0,"var-pull-refresh__animation":n.value==="loading"})),h=_(()=>({transform:`translate3d(0px, ${t.value}px, 0px) translate(-50%, 0)`,transition:r.value?`transform ${e.animationDuration}ms`:void 0,background:e.successBgColor||e.bgColor,color:e.successColor||e.color})),B=_(()=>n.value==="success"),I=s=>{!a.value||(n.value="pulling",c.value=s.touches[0].clientY)},$=s=>{const d=M(D);if(d>0||!a.value)return;d===0&&t.value>f&&s.cancelable&&s.preventDefault();const S=(s.touches[0].clientY-c.value)/2+f;t.value=S>=v?v:S,l.value=t.value>=v*.2?"refresh":"arrow-down"},k=()=>{var s,d;!a.value||(r.value=!0,t.value>=v*.2?(n.value="loading",t.value=v*.3,(s=e["onUpdate:modelValue"])==null||s.call(e,!0),(d=e.onRefresh)==null||d.call(e)):(n.value="loosing",l.value="arrow-down",t.value=f,setTimeout(()=>{r.value=!1},y(e.animationDuration))))},j=()=>{setTimeout(()=>{n.value="default",l.value="arrow-down",r.value=!1},y(e.animationDuration))};return x(()=>e.modelValue,s=>{s===!1&&(r.value=!0,n.value="success",l.value="checkbox-marked-circle",setTimeout(()=>{t.value=f,j()},y(e.successDuration)))}),C(()=>{D=P(o.value)}),{freshNode:o,touchStart:I,touchMove:$,touchEnd:k,iconName:l,iconClass:i,controlStyle:h,isSuccess:B}}});function Q(e,o,c,t,l,n){const r=g("var-icon");return p(),T("div",{ref:"freshNode",class:"var-pull-refresh",onTouchstart:o[0]||(o[0]=(...a)=>e.touchStart&&e.touchStart(...a)),onTouchmove:o[1]||(o[1]=(...a)=>e.touchMove&&e.touchMove(...a)),onTouchend:o[2]||(o[2]=(...a)=>e.touchEnd&&e.touchEnd(...a)),onTouchcancel:o[3]||(o[3]=(...a)=>e.touchEnd&&e.touchEnd(...a))},[A("div",{class:w(["var-pull-refresh__control var-elevation--2",[e.isSuccess?"var-pull-refresh__control-success":null]]),style:O(e.controlStyle)},[F(r,{name:e.iconName,transition:200,class:w(e.iconClass),"var-pull-refresh-cover":""},null,8,["name","class"])],6),z(e.$slots,"default")],544)}var m=b(K,[["render",Q]]);m.install=function(e){e.component(m.name,m)};const E=Array(10).fill("List Item"),W=Array(10).fill("This is new List Item"),Z={name:"PullRefreshExample",components:{[m.name]:m,[V.name]:V},setup(){const e=u(!1),o=u(E),c=()=>{setTimeout(()=>{o.value=o.value[0]==="List Item"?W:E,e.value=!1},2e3)},t=l=>{l.preventDefault()};return C(()=>{document.body.addEventListener("touchmove",t,{passive:!1})}),Y(()=>{document.body.removeEventListener("touchmove",t)}),{refresh:c,isRefresh:e,data:o}}};function ee(e,o,c,t,l,n){const r=g("var-cell"),a=g("var-pull-refresh");return p(),N(a,{onRefresh:t.refresh,modelValue:t.isRefresh,"onUpdate:modelValue":o[0]||(o[0]=i=>t.isRefresh=i),"success-duration":"2000"},{default:R(()=>[(p(!0),T(H,null,q(t.data,(i,h)=>(p(),N(r,{key:h,border:""},{default:R(()=>[X(G(i+" "+(h+1)),1)]),_:2},1024))),128))]),_:1},8,["onRefresh","modelValue"])}var re=b(Z,[["render",ee],["__scopeId","data-v-ac011012"]]);export{re as default};
