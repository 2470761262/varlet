import{S as Z}from"./index.6ee15f3b.js";import{q as O,r as c,b as x,T as ee,o as _,k as P,w as y,a as j,B as L,A as ne,I as te,l as B,t as f,y as se,x as M,S as oe,c as b,F as R,j as U,m as ae,n as X,z as re,d as $,h as w}from"./vendor.ea41cd30.js";import{b as le,e as ie,a as ce,f as de}from"./components.c996eb06.js";import{_ as z}from"./elevation.703f44d6.js";import{t as V,h as ue,g as fe}from"./shared.2d2ec151.js";import{h as ve,b as _e,s as me,n as he,r as pe}from"./elements.fbcbc1e3.js";import{C as F}from"./index.92a89072.js";import{u as xe,a as H,_ as ye,b as be,c as Ce,w as ke}from"./en-US.fc126591.js";import"./index.94e058ff.js";const Y=Symbol("INDEX_BAR_BIND_INDEX_ANCHOR_KEY"),K=Symbol("INDEX_BAR_COUNT_INDEX_ANCHOR_KEY");function Ie(){const{bindChildren:e,childProviders:o}=le(Y),{length:t}=ie(K);return{length:t,indexAnchors:o,bindIndexAnchors:e}}function ge(){const{parentProvider:e,bindParent:o}=ce(Y),{index:t}=de(K);if(!e||!o)throw Error('[Varlet] IndexAnchor: You should use this component in "IndexBar"');return{index:t,indexBar:e,bindIndexBar:o}}const Te={index:{type:[Number,String]}};const Be=O({name:"VarIndexAnchor",components:{VarSticky:Z},inheritAttrs:!1,props:Te,setup(e){const{index:o,indexBar:t,bindIndexBar:l}=ge(),i=c(0),d=c(!1),s=x(()=>e.index),a=c(null),{active:m,sticky:r,cssMode:E,stickyOffsetTop:N,zIndex:k}=t;return l({index:o,name:s,ownTop:i,setOwnTop:()=>{!a.value||(i.value=a.value.$el?a.value.$el.offsetTop:a.value.offsetTop)},setDisabled:I=>{d.value=I}}),{name:s,anchorEl:a,active:m,sticky:r,zIndex:k,disabled:d,cssMode:E,stickyOffsetTop:N,Transition:ee}}});function Ee(e,o,t,l,i,d){return _(),P(te(e.sticky?"var-sticky":e.Transition),{"offset-top":e.sticky?e.stickyOffsetTop:null,"z-index":e.sticky?e.zIndex:null,disabled:e.disabled&&!e.cssMode,"css-mode":e.cssMode,ref:"anchorEl"},{default:y(()=>[j("div",ne({class:"var-index-anchor"},e.$attrs),[L(e.$slots,"default",{},()=>[B(f(e.name),1)])],16)]),_:3},8,["offset-top","z-index","disabled","css-mode"])}var q=z(Be,[["render",Ee]]);const Ne={sticky:{type:Boolean,default:!0},stickyOffsetTop:{type:Number,default:0},cssMode:{type:Boolean,default:!1},hideList:{type:Boolean,default:!1},zIndex:{type:[Number,String],default:1},highlightColor:{type:String},duration:{type:[Number,String],default:0},onClick:{type:Function},onChange:{type:Function}};const Ae=O({name:"VarIndexBar",props:Ne,setup(e){const{length:o,indexAnchors:t,bindIndexAnchors:l}=Ie(),i=c(null),d=c(""),s=c(null),a=c(null),m=c([]),r=c(),E=x(()=>e.sticky),N=x(()=>e.cssMode),k=x(()=>e.stickyOffsetTop),A=x(()=>e.zIndex);l({active:r,sticky:E,cssMode:N,stickyOffsetTop:k,zIndex:A});const S=n=>{var v;const u=fe(n)?n.name.value:n;u!==r.value&&(r.value=u,(v=e.onChange)==null||v.call(e,u))},I=()=>{const{scrollTop:n,scrollHeight:u}=i.value,{offsetTop:v}=a.value;t.forEach((h,p)=>{const g=h.ownTop.value,T=n-g+k.value-v,W=p===t.length-1?u:t[p+1].ownTop.value-h.ownTop.value;T>=0&&T<W&&!d.value&&(p&&!e.cssMode&&t[p-1].setDisabled(!0),h.setDisabled(!1),S(h))})},D=async(n,u)=>{var g;if(u&&((g=e.onClick)==null||g.call(e,n)),n===r.value)return;const v=t.find(({name:T})=>n===T.value);if(!v)return;const h=v.ownTop.value,p=_e(i.value);d.value=n,S(n),await me(i.value,{left:p,top:h,animation:ue,duration:V(e.duration)}),he(()=>{d.value=""})},Q=n=>{pe(()=>D(n,!0))};return se(()=>o.value,()=>re(()=>{t.forEach(({name:n,setOwnTop:u})=>{n.value&&m.value.push(n.value),u()})})),M(()=>{var n;s.value=ve(a.value),i.value=s.value===window?s.value.document.documentElement:s.value,(n=s.value)==null||n.addEventListener("scroll",I)}),oe(()=>{var n;(n=s.value)==null||n.removeEventListener("scroll",I)}),{barEl:a,active:r,zIndex:A,anchorNameList:m,toNumber:V,scrollTo:Q,anchorClick:D}}}),Se={class:"var-index-bar",ref:"barEl"},$e=["onClick"];function we(e,o,t,l,i,d){return _(),b("div",Se,[L(e.$slots,"default"),j("ul",{class:"var-index-bar__anchor-list",style:X({zIndex:e.toNumber(e.zIndex)+2,display:e.hideList?"none":"block"})},[(_(!0),b(R,null,U(e.anchorNameList,s=>(_(),b("li",{key:s,class:ae(["var-index-bar__anchor-item",{"var-index-bar__anchor-item--active":e.active===s}]),style:X({color:e.active===s&&e.highlightColor?e.highlightColor:""}),onClick:a=>e.anchorClick(s)},f(s),15,$e))),128))],4)],512)}var C=z(Ae,[["render",we]]);C.install=function(e){e.component(C.name,C)};var ze={title:"\u6807\u9898",text:"\u6587\u672C"},De={title:"Title",text:"Text"};const{add:G,use:Oe,pack:Pe,packs:Ge,merge:Je}=xe(),je=e=>{Ce(e),Oe(e)};H("zh-CN",ye);H("en-US",be);G("zh-CN",ze);G("en-US",De);const Le={name:"IndexBarExample",components:{[C.name]:C,[q.name]:q,[F.name]:F},setup(){const e=c([]);M(()=>{for(let t=0;t<26;t++)e.value.push(String.fromCharCode(65+t))});const o=t=>{console.log(t)};return ke(je),{list:e,pack:Pe,change:o}}};function Me(e,o,t,l,i,d){const s=$("var-index-anchor"),a=$("var-cell"),m=$("var-index-bar");return _(),P(m,{onChange:l.change,duration:"300","sticky-offset-top":54},{default:y(()=>[(_(!0),b(R,null,U(l.list,r=>(_(),b("div",{key:r},[w(s,{index:r,class:"var-index-anchor__example"},{default:y(()=>[B(f(l.pack.title)+" "+f(r),1)]),_:2},1032,["index"]),w(a,null,{default:y(()=>[B(f(r)+" "+f(l.pack.text),1)]),_:2},1024),w(a,null,{default:y(()=>[B(f(r)+" "+f(l.pack.text),1)]),_:2},1024)]))),128))]),_:1},8,["onChange"])}var Qe=z(Le,[["render",Me]]);export{Qe as default};
