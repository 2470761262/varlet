var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,r=(t,a,n)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n;import{A as i}from"./AppType.51c8189b.js";import{q as u,r as m,b as c,y as d,o as s,c as p,a as v,n as h,F as f,j as y,m as k,t as b,f as g,_,p as S,d as x,h as w,w as C,T,a2 as U,l as V}from"./vendor.85536c59.js";import{t as P}from"./shared.6d6b25a1.js";import{_ as $,w as H}from"./IconSfc.fde87e76.js";import{u as M,a as I,_ as j,b as O,c as A}from"./en-US.97fca002.js";const N=["12","1","2","3","4","5","6","7","8","9","10","11"],B=["00","13","14","15","16","17","18","19","20","21","22","23"],R=["00","05","10","15","20","25","30","35","40","45","50","55"];const D={modelValue:{type:String},shadow:{type:Boolean,default:!1},color:{type:String},headerColor:{type:String},format:{type:String,default:"ampm",validator:function(e){return["ampm","24hr"].includes(e)}},allowedTime:{type:Object},min:{type:String},max:{type:String},useSeconds:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},"onUpdate:modelValue":{type:Function},onChange:{type:Function}},X=(e,t)=>"24hr"===e||"am"===t,Y=(e,t,a)=>{const n=N.findIndex((e=>P(e)===P(a))),o=X(e,t)?a:B[n];return{hourStr:o,hourNum:P(o)}},z=e=>{const[t,a,n]=e.split(":");return{hour:P(t),minute:P(a),second:P(n)}},F=e=>{var t,a;const{time:n,format:o,ampm:l,hour:r,max:i,min:u,disableHour:m}=e,{hourStr:c,hourNum:d}=Y(o,l,r);let s=!1,p=!1;if(m.includes(c))return!0;if(i&&!u){const{hour:e,minute:t}=z(i);s=e===d&&n>t}if(!i&&u){const{hour:e,minute:t}=z(u);s=e===d&&n<t}if(i&&u){const{hour:e,minute:t}=z(i),{hour:a,minute:o}=z(u);s=a===d&&n<o||e===d&&n>t}return(null==(t=e.allowedTime)?void 0:t.minutes)&&(p=null==(a=e.allowedTime)?void 0:a.minutes(n)),s||p},L=e=>{var t,a;const{time:n,format:o,ampm:l,hour:r,minute:i,max:u,min:m,disableHour:c}=e,{hourStr:d,hourNum:s}=Y(o,l,r);let p=!1,v=!1;if(c.includes(d))return!0;if(u&&!m){const{hour:e,minute:t,second:a}=z(u);p=e===s&&t<i||t===i&&n>a}if(!u&&m){const{hour:e,minute:t,second:a}=z(m);p=e===s&&t>i||t===i&&n>a}if(u&&m){const{hour:e,minute:t,second:a}=z(u),{hour:o,minute:l,second:r}=z(m);p=e===s&&t<i||o===s&&l>i||e===s&&t===i&&n>a||o===s&&l===i&&n<r}return(null==(t=e.allowedTime)?void 0:t.seconds)&&(v=null==(a=e.allowedTime)?void 0:a.seconds(n)),p||v},q=u({name:"Clock",props:{isInner:{type:Boolean,required:!0},rad:{type:Number},format:{type:String,default:"ampm"},allowedTime:{type:Object},time:{type:Object,required:!0},useSeconds:{type:Boolean,default:!1},preventNextUpdate:{type:Boolean,default:!1},type:{type:String,default:"hour"},ampm:{type:String,default:"am"},color:{type:String},min:{type:String},max:{type:String}},emits:["update","change-prevent-update"],setup(e,{emit:t}){const a=m(null),n=m([]),o=m([]),l=c((()=>({transform:`rotate(${P(e.rad)}deg)`,height:e.isInner&&"hour"===e.type?"calc(50% - 40px)":"calc(50% - 4px)",backgroundColor:s(),borderColor:s()}))),r=c((()=>{if(void 0===e.rad)return;const t=e.rad/30;return t>=0?t:t+12})),i=c((()=>"hour"===e.type?N:R)),u=(t,a)=>{t=null!=t?t:"minute"===e.type?e.time.minute:e.time.second;const o="minute"===e.type?F:L,l={time:P(t),format:e.format,ampm:e.ampm,hour:e.time.hour,minute:P(e.time.minute),max:e.max,min:e.min,allowedTime:e.allowedTime,disableHour:n.value};return a&&"minute"===e.type&&Reflect.deleteProperty(l,"minute"),o(l)},s=()=>{if(void 0===r.value)return e.color;const t=e.isInner?B[r.value]:i.value[r.value];return i.value===R?u()?"#bdbdbd":e.color:v(t)?"#bdbdbd":e.color},p=(t,a)=>a?r.value===t&&e.isInner:r.value===t&&(!e.isInner||"hour"!==e.type),v=t=>{if("hour"===e.type){if(X(e.format,e.ampm))return n.value.includes(t);const a=N.findIndex((e=>e===t));return o.value.includes(a)}return u(t,!0)};return d([r,()=>e.isInner],(([a,n],[o,l])=>{if(a===o&&n===l||"hour"!==e.type||void 0===r.value)return;const i=n?B[r.value]:(()=>{if(void 0===r.value)return;return("am"===e.ampm?N:B)[r.value].padStart(2,"0")})(),u=e.useSeconds?`:${e.time.second}`:"",m=`${i}:${e.time.minute}${u}`;e.preventNextUpdate||t("update",m),t("change-prevent-update")})),d((()=>e.rad),((a,n)=>{if("hour"===e.type||void 0===a||void 0===n)return;const o=a/6>=0?a/6:a/6+60;if(o===(n/6>=0?n/6:n/6+60))return;let l;const{hourStr:r}=Y(e.format,e.ampm,e.time.hour);if("minute"===e.type){l=`${r}:${_().minute(o).format("mm")}${e.useSeconds?`:${e.time.second}`:""}`}if("second"===e.type){const t=_().second(o).format("ss"),a=e.useSeconds?`:${t}`:"";l=`${r}:${e.time.minute}${a}`}t("update",l)})),d([()=>e.max,()=>e.min,()=>e.allowedTime],(([e,t,a])=>{if(n.value=[],e&&!t){const{hour:t}=z(e),a=N.filter((e=>P(e)>t)),o=B.filter((e=>P(e)>t));n.value=[...a,...o]}if(!e&&t){const{hour:e}=z(t),a=N.filter((t=>P(t)<e)),o=B.filter((t=>P(t)<e));n.value=[...a,...o]}if(e&&t){const{hour:a}=z(e),{hour:o}=z(t),l=N.filter((e=>P(e)<o||P(e)>a)),r=B.filter((e=>P(e)<o||P(e)>a));n.value=[...l,...r]}if(null==a?void 0:a.hours){const{hours:e}=a,t=N.filter((t=>!e(P(t)))),o=B.filter((t=>!e(P(t))));n.value=[...new Set([...n.value,...t,...o])]}o.value=n.value.map((e=>B.findIndex((t=>e===t)))).filter((e=>e>=0))}),{immediate:!0}),{hours24:B,timeScales:i,inner:a,handStyle:l,disableHour:n,isActive:p,isDisable:v,getSize:()=>{const{width:e,height:t}=a.value.getBoundingClientRect();return{width:e,height:t}},getStyle:(t,a,n)=>{const o=2*Math.PI/12*t-Math.PI/2,l=50*(1+Math.cos(o)),r=50*(1+Math.sin(o)),{backgroundColor:i,color:u}=p(t,n)?v(a)?{backgroundColor:"#bdbdbd",color:"#fff"}:{backgroundColor:e.color,color:null}:{backgroundColor:null,color:null};return{left:`${l}%`,top:`${r}%`,backgroundColor:i,color:u}},activeItemIndex:r}}}),E={class:"var-time-picker-clock"},G={key:0,class:"var-time-picker-clock__inner",ref:"inner"};const J=u({name:"VarTimePicker",components:{Clock:$(q,[["render",function(e,t,a,n,o,l){return s(),p("div",E,[v("div",{class:"var-time-picker-clock__hand",style:h(e.handStyle)},null,4),(s(!0),p(f,null,y(e.timeScales,((t,a)=>(s(),p("div",{class:k(["var-time-picker-clock__item",[e.isActive(a,!1)?"var-time-picker-clock__item--active":null,e.isDisable(t)?"var-time-picker-clock__item--disable":null]]),key:t,style:h(e.getStyle(a,t,!1))},b(t),7)))),128)),"24hr"===e.format&&"hour"===e.type?(s(),p("div",G,[(s(!0),p(f,null,y(e.hours24,((t,a)=>(s(),p("div",{class:k(["var-time-picker-clock__item",[e.isActive(a,!0)?"var-time-picker-clock__item--active":null,e.isDisable(t)?"var-time-picker-clock__item--disable":null]]),key:t,style:h(e.getStyle(a,t,!0))},b(t),7)))),128))],512)):g("v-if",!0)])}]])},props:D,setup(e){const t=m(null),a=m(null),n=m(null),o=m(!1),l=m(!1),r=m(!1),i=m(!1),u=m(!1),s=m(void 0),p=m(0),v=m(0),h=m("hour"),f=m("am"),y=m(!1),k=m(!1),b=m({hour:"00",minute:"00",second:"00"}),g=S({x:0,y:0}),x=S({x:[],y:[]}),w=c((()=>"hour"===h.value?s.value:"minute"===h.value?p.value:v.value)),C=t=>{var a,n;null==(a=e["onUpdate:modelValue"])||a.call(e,t),null==(n=e.onChange)||n.call(e,t)},T=(e,t)=>{const a=e>=x.x[0]&&e<=x.x[1],n=t>=x.y[0]&&t<=x.y[1];return a&&n},U=()=>{const{left:a,top:o,width:l,height:r}=t.value.getBoundingClientRect();if(g.x=a+l/2,g.y=o+r/2,"hour"===h.value&&"24hr"===e.format){const{rangeXMin:e,rangeXMax:t,rangeYMin:a,rangeYMax:o}=(()=>{const{width:e,height:t}=n.value.getSize();return{rangeXMin:g.x-e/2-8,rangeXMax:g.x+e/2+8,rangeYMin:g.y-t/2-8,rangeYMax:g.y+t/2+8}})();x.x=[e,t],x.y=[a,o]}};return d((()=>e.modelValue),(t=>{if(t){const{hour:a,minute:n,second:l}=z(t),r=_().hour(a).format("hh"),i=_().hour(a).format("HH"),u=_().minute(n).format("mm"),m=_().second(l).format("ss");s.value=30*("12"===r?0:P(r)),p.value=6*P(u),v.value=6*P(m),b.value=(t=>{const a="24hr"===e.format?"HH":"hh",{hour:n,minute:o,second:l}=z(t);return{hour:_().hour(n).format(a),minute:_().minute(o).format("mm"),second:_().second(l).format("ss")}})(t),"24hr"!==e.format&&(f.value=`${a}`.padStart(2,"0")===i&&B.includes(i)?"pm":"am"),o.value="24hr"===e.format&&B.includes(i)}}),{immediate:!0}),{getRad:w,time:b,container:t,inner:n,picker:a,isInner:o,type:h,ampm:f,isPreventNextUpdate:l,moveHand:t=>{if(t.preventDefault(),e.readonly)return;U();const{clientX:a,clientY:l}=t.touches[0],m=a-g.x,c=l-g.y,d=Math.round(57.29577951308232*Math.atan2(c,m));"hour"===h.value?((t,a,l)=>{const{disableHour:u}=n.value;r.value=T(t,a);const m=30*Math.round(l/30)+90,c=(e=>{const t=e/30;return t>=0?t:t+12})(m),d=o.value?N[c]:B[c];if(u.includes(d)||(o.value="24hr"===e.format&&T(t,a)),o.value!==r.value)return;const p=o.value||"pm"===f.value?B[c]:N[c];y.value=u.includes(p),y.value||(s.value=m,i.value=!0)})(a,l,d):"minute"===h.value?(t=>{const{disableHour:a}=n.value,o=6*Math.round(t/6)+90,l={time:o/6>=0?o/6:o/6+60,format:e.format,ampm:f.value,hour:b.value.hour,max:e.max,min:e.min,disableHour:a,allowedTime:e.allowedTime};k.value=F(l),k.value||(p.value=o,u.value=!0)})(d):(t=>{const{disableHour:a}=n.value,o=6*Math.round(t/6)+90,l={time:o/6>=0?o/6:o/6+60,format:e.format,ampm:f.value,hour:b.value.hour,minute:P(b.value.minute),max:e.max,min:e.min,disableHour:a,allowedTime:e.allowedTime};L(l)||(v.value=o)})(d)},checkPanel:e=>{i.value=!1,k.value=!1,h.value=e},checkAmpm:t=>{if(e.readonly)return;f.value=t;const a=(e=>{const{disableHour:t}=n.value,a=N.findIndex((e=>P(e)===P(b.value.hour))),o="am"===e?N:B;return[...o.slice(a),...o.slice(0,a)].find(((e,a)=>(l.value=0!==a,!t.includes(e))))})(t);if(!a)return;const o=e.useSeconds?`:${b.value.second}`:"",r=`${a.padStart(2,"0")}:${b.value.minute}${o}`;C(r)},end:()=>{e.readonly||("hour"===h.value&&i.value?h.value="minute":"minute"===h.value&&e.useSeconds&&u.value&&(h.value="second"))},update:C,changePreventUpdate:()=>{l.value=!1}}}}),K={class:"var-time-picker-title__time"},Q=v("span",null,":",-1),W={key:0},Z={key:0,class:"var-time-picker-title__ampm"},ee={class:"var-time-picker-body"};var te=$(J,[["render",function(e,t,a,n,o,l){const r=x("clock");return s(),p("div",{class:k(["var-time-picker",[e.shadow?"var-elevation--2":null]]),ref:"picker"},[v("div",{class:"var-time-picker-title",style:h({background:e.headerColor||e.color})},[v("div",K,[v("div",{class:k(["var-time-picker-title__btn","hour"===e.type?"var-time-picker-title__btn--active":null]),onClick:t[0]||(t[0]=t=>e.checkPanel("hour"))},b(e.time.hour),3),Q,v("div",{class:k(["var-time-picker-title__btn","minute"===e.type?"var-time-picker-title__btn--active":null]),onClick:t[1]||(t[1]=t=>e.checkPanel("minute"))},b(e.time.minute),3),e.useSeconds?(s(),p("span",W,":")):g("v-if",!0),e.useSeconds?(s(),p("div",{key:1,class:k(["var-time-picker-title__btn","second"===e.type?"var-time-picker-title__btn--active":null]),onClick:t[2]||(t[2]=t=>e.checkPanel("second"))},b(e.time.second),3)):g("v-if",!0)]),"ampm"===e.format?(s(),p("div",Z,[v("div",{class:k(["var-time-picker-title__btn","am"===e.ampm?"var-time-picker-title__btn--active":null]),onClick:t[3]||(t[3]=t=>e.checkAmpm("am"))}," AM ",2),v("div",{class:k(["var-time-picker-title__btn","pm"===e.ampm?"var-time-picker-title__btn--active":null]),onClick:t[4]||(t[4]=t=>e.checkAmpm("pm"))}," PM ",2)])):g("v-if",!0)],4),v("div",ee,[v("div",{class:"var-time-picker-clock__container",onTouchstart:t[5]||(t[5]=(...t)=>e.moveHand&&e.moveHand(...t)),onTouchmove:t[6]||(t[6]=(...t)=>e.moveHand&&e.moveHand(...t)),onTouchend:t[7]||(t[7]=(...t)=>e.end&&e.end(...t)),ref:"container"},[w(T,{name:"var-time-picker-panel-fade"},{default:C((()=>[w(r,{key:e.type,ref:"inner",type:e.type,ampm:e.ampm,color:e.color,"is-inner":e.isInner,format:e.format,"allowed-time":e.allowedTime,rad:e.getRad,time:e.time,"prevent-next-update":e.isPreventNextUpdate,"use-seconds":e.useSeconds,max:e.max,min:e.min,onUpdate:e.update,onChangePreventUpdate:e.changePreventUpdate},null,8,["type","ampm","color","is-inner","format","allowed-time","rad","time","prevent-next-update","use-seconds","max","min","onUpdate","onChangePreventUpdate"])])),_:1})],544)])],2)}]]);te.install=function(e){e.component(te.name,te)};const{add:ae,use:ne,pack:oe,packs:le,merge:re}=M(),ie=e=>{A(e),ne(e)};I("zh-CN",j),I("en-US",O),ae("zh-CN",{basicUsage:"基本使用",hour24:"24小时格式",readonly:"只读",timeLimit:"时间限制",custom:"自定义",showSecond:"显示秒"}),ae("en-US",{basicUsage:"Basic Usage",hour24:"24hr Format",readonly:"Readonly",timeLimit:"Time Limit",custom:"Custom",showSecond:"show-seconds"});const ue={name:"TimePickerExample",components:{[te.name]:te,AppType:i},setup(){const e=S({date:"11:20",date1:"15:10",date2:"07:10",date3:"07:10:12",date4:"05:10",date5:"17:36:22"}),i={hours:e=>e%2==0,minutes:e=>e%15!=0,seconds:e=>e%2!=0};return H(ie),u=((e,t)=>{for(var a in t||(t={}))o.call(t,a)&&r(e,a,t[a]);if(n)for(var a of n(t))l.call(t,a)&&r(e,a,t[a]);return e})({},U(e)),t(u,a({change:e=>{console.log(e)},pack:oe,allowedTime:i}));var u}},me={style:{"padding-bottom":"20px"}};var ce=$(ue,[["render",function(e,t,a,n,o,l){const r=x("app-type"),i=x("var-time-picker");return s(),p(f,null,[v("div",null,[w(r,null,{default:C((()=>[V(b(n.pack.basicUsage),1)])),_:1}),w(i,{modelValue:e.date,"onUpdate:modelValue":t[0]||(t[0]=t=>e.date=t)},null,8,["modelValue"])]),v("div",null,[w(r,null,{default:C((()=>[V(b(n.pack.hour24),1)])),_:1}),w(i,{modelValue:e.date1,"onUpdate:modelValue":t[1]||(t[1]=t=>e.date1=t),format:"24hr",shadow:""},null,8,["modelValue"])]),v("div",null,[w(r,null,{default:C((()=>[V(b(n.pack.showSecond),1)])),_:1}),w(i,{modelValue:e.date5,"onUpdate:modelValue":t[2]||(t[2]=t=>e.date5=t),format:"24hr","use-seconds":""},null,8,["modelValue"])]),v("div",null,[w(r,null,{default:C((()=>[V(b(n.pack.readonly),1)])),_:1}),w(i,{modelValue:e.date2,"onUpdate:modelValue":t[3]||(t[3]=t=>e.date2=t),readonly:"",shadow:""},null,8,["modelValue"])]),v("div",null,[w(r,null,{default:C((()=>[V(b(n.pack.timeLimit),1)])),_:1}),w(i,{modelValue:e.date3,"onUpdate:modelValue":t[4]||(t[4]=t=>e.date3=t),format:"24hr","use-seconds":"",min:"2:28:38",max:"19:40:22","allowed-time":n.allowedTime},null,8,["modelValue","allowed-time"])]),v("div",me,[w(r,null,{default:C((()=>[V(b(n.pack.custom),1)])),_:1}),w(i,{modelValue:e.date4,"onUpdate:modelValue":t[5]||(t[5]=t=>e.date4=t),shadow:"","header-color":"purple",color:"#7bb872",min:"2:28:38",max:"19:40:22",onChange:n.change},null,8,["modelValue","onChange"])])],64)}]]);export{ce as default};
