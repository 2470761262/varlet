import{R as e}from"./index.623f4af7.js";import{I as a}from"./index.deaa662f.js";import{F as l,u as t}from"./provide.45897597.js";import{b as o}from"./components.fc1d8498.js";import{t as r}from"./elements.f945da86.js";import{t as n}from"./shared.6d6b25a1.js";import{_ as s}from"./IconSfc.d1e88af2.js";import{q as i,z as d,d as u,e as m,o as p,c,a as f,F as y,j as v,i as g,n as b,m as h,h as S}from"./vendor.bac705d4.js";const C={modelValue:{type:[String,Number],default:0},count:{type:[String,Number],default:5},color:{type:String},icon:{type:String,default:"star"},emptyColor:{type:String},emptyIcon:{type:String,default:"star-outline"},size:{type:[String,Number],default:"24"},gap:{type:[String,Number],default:"2"},half:{type:Boolean,default:!1},halfIcon:{type:String,default:"star-half-full"},disabled:{type:Boolean,default:!1},disabledColor:{type:String},readonly:{type:Boolean,default:!1},ripple:{type:Boolean,default:!0},rules:{type:Array},onChange:{type:Function},"onUpdate:modelValue":{type:Function}};const V=i({name:"VarRate",components:{[a.name]:a,[l.name]:l},directives:{Ripple:e},props:C,setup(e){const{form:a,bindForm:l}=t(),{errorMessage:s,validateWithTrigger:i,validate:u,resetValidation:m}=o(),p=l=>{const{modelValue:t,disabled:o,disabledColor:r,color:s,half:i,emptyColor:d}=e;let u=null;return o||(null==a?void 0:a.disabled.value)?u=r:s&&(u=s),l<=n(t)?{type:"full",score:l,color:u}:i&&l<=n(t)+.5?{type:"half",score:l,color:u}:{type:"empty",score:l,color:o||(null==a?void 0:a.disabled.value)?r:d}},c=()=>u(e.rules,n(e.modelValue)),f=()=>{var a;null==(a=e["onUpdate:modelValue"])||a.call(e,0),m()};return null==l||l({reset:f,validate:c,resetValidation:m}),{errorMessage:s,formDisabled:null==a?void 0:a.disabled,formReadonly:null==a?void 0:a.readonly,getStyle:a=>{const{count:l,size:t,gap:o}=e;return{color:p(a).color,marginRight:a!==n(l)?r(o):0,width:r(t),height:r(t),borderRadius:"50%"}},getClass:e=>{const{type:l,color:t}=p(e);return{"var-rate__content":!0,"var-rate--disabled":null==a?void 0:a.disabled.value,"var-rate--error":s.value,"var-rate--primary":"empty"!==l&&!t}},getIconName:a=>{const{type:l}=p(a),{icon:t,halfIcon:o,emptyIcon:r}=e;return"full"===l?t:"half"===l?o:r},handleClick:(l,t)=>{const{readonly:o,disabled:r,onChange:n}=e;o||r||(null==a?void 0:a.disabled.value)||(null==a?void 0:a.readonly.value)||(((a,l)=>{var t;if(e.half){const{offsetWidth:e}=l.target;l.offsetX<=Math.floor(e/2)&&(a-=.5)}null==(t=e["onUpdate:modelValue"])||t.call(e,a)})(l,t),null==n||n(l),d((()=>i(["onChange"],"onChange",e.rules,e.modelValue))))},reset:f,validate:c,resetValidation:m,toSizeUnit:r,toNumber:n}}}),j={class:"var-rate__warp"},I={class:"var-rate"},N=["onClick"];var R=s(V,[["render",function(e,a,l,t,o,r){const n=u("var-icon"),s=u("var-form-details"),i=m("ripple");return p(),c("div",j,[f("div",I,[(p(!0),c(y,null,v(e.toNumber(e.count),(a=>g((p(),c("div",{key:a,style:b(e.getStyle(a)),class:h(e.getClass(a)),onClick:l=>e.handleClick(a,l)},[S(n,{transition:0,name:e.getIconName(a),style:b({fontSize:e.toSizeUnit(e.size)})},null,8,["name","style"])],14,N)),[[i,{disabled:e.formReadonly||e.readonly||e.formDisabled||e.disabled||!e.ripple}]]))),128))]),S(s,{"error-message":e.errorMessage},null,8,["error-message"])])}]]);R.install=function(e){e.component(R.name,R)};export{R};
