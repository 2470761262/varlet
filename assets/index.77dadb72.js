var R=Object.defineProperty;var A=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable;var E=(e,n,t)=>n in e?R(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,f=(e,n)=>{for(var t in n||(n={}))X.call(n,t)&&E(e,t,n[t]);if(A)for(var t of A(n))Z.call(n,t)&&E(e,t,n[t]);return e};import{q as I,r as J,b as _,y as T,x as Q,d as g,i as W,v as ee,o as v,c as ne,a as h,m as j,B as y,k as C,f as V,n as N,l as L,t as B,h as b,w as S,A as w,T as te,K as ae,p as $,U as oe,X as se}from"./vendor.ea41cd30.js";import{p as P,L as ie}from"./index.bfdc3a12.js";import{I as re}from"./index.94e058ff.js";import{u as ce}from"./zIndex.c624737f.js";import{p as q,c as le,m as de}from"./components.c996eb06.js";import{_ as F}from"./elevation.703f44d6.js";import{c as ue}from"./index.510439cf.js";import{g as U,t as D}from"./shared.2d2ec151.js";import{u as fe}from"./lock.67e58c2a.js";function pe(e){return["top","center","bottom"].includes(e)}function me(e){return O.includes(e)}const G={type:{type:String,validator:me},position:{type:String,default:"top",validator:pe},content:{type:String},contentClass:{type:String},duration:{type:Number,default:3e3},vertical:{type:Boolean,default:!1},loadingType:q(P,"type"),loadingSize:q(P,"size"),lockScroll:{type:Boolean,default:!1},show:{type:Boolean,default:!1},teleport:{type:String,default:"body"},forbidClick:{type:Boolean,default:!1},onOpen:{type:Function,default:()=>{}},onOpened:{type:Function,default:()=>{}},onClose:{type:Function,default:()=>{}},onClosed:{type:Function,default:()=>{}},"onUpdate:show":{type:Function},_update:{type:String}};const ve={success:"checkbox-marked-circle",warning:"warning",info:"information",error:"error",loading:""},ye=I({name:"VarSnackbarCore",components:{VarLoading:ie,VarIcon:re},props:G,setup(e){const n=J(null),{zIndex:t}=ce(()=>e.show,1);fe(e,"show","lockScroll");const a=_(()=>{const{position:o,vertical:d,type:u}=e,K=`var-snackbar__wrapper var-snackbar__wrapper-${o} var-elevation--4`,Y=d?" var-snackbar__vertical":"",H=u&&O.includes(u)?` var-snackbar__wrapper-${u}`:"";return`${K}${Y}${H}`}),s=_(()=>e.type==="loading"||e.forbidClick),i=_(()=>e.type?ve[e.type]:""),r=()=>{n.value=setTimeout(()=>{var o;e.type!=="loading"&&((o=e["onUpdate:show"])==null||o.call(e,!1))},e.duration)};return T(()=>e.show,o=>{var d,u;o?((d=e.onOpen)==null||d.call(e),r()):o===!1&&(clearTimeout(n.value),(u=e.onClose)==null||u.call(e))}),T(()=>e._update,()=>{clearTimeout(n.value),r()}),Q(()=>{var o;e.show&&((o=e.onOpen)==null||o.call(e),r())}),{zIndex:t,snackbarClass:a,iconName:i,isForbidClick:s}}}),be={class:"var-snackbar__action"};function ke(e,n,t,a,s,i){const r=g("var-icon"),o=g("var-loading");return W((v(),ne("div",{class:"var-snackbar",style:N({pointerEvents:e.isForbidClick?"auto":"none",zIndex:e.zIndex})},[h("div",{class:j(e.snackbarClass),style:N({zIndex:e.zIndex})},[h("div",{class:j(["var-snackbar__content",[e.contentClass]])},[y(e.$slots,"default",{},()=>[L(B(e.content),1)])],2),h("div",be,[e.iconName?(v(),C(r,{key:0,name:e.iconName},null,8,["name"])):V("v-if",!0),e.type==="loading"?(v(),C(o,{key:1,type:e.loadingType,size:e.loadingSize},null,8,["type","size"])):V("v-if",!0),y(e.$slots,"action")])],6)],4)),[[ee,e.show]])}var M=F(ye,[["render",ke]]);const _e=I({name:"VarSnackbar",components:{VarSnackbarCore:M},props:G,setup(){const{disabled:e}=le();return{disabled:e}}});function ge(e,n,t,a,s,i){const r=g("var-snackbar-core");return v(),C(ae,{to:e.teleport,disabled:e.disabled},[b(te,{name:"var-snackbar-fade",onAfterEnter:e.onOpened,onAfterLeave:e.onClosed},{default:S(()=>[b(r,w(e.$props,{class:"var-snackbar-transition"}),{action:S(()=>[y(e.$slots,"action")]),default:S(()=>[y(e.$slots,"default",{},()=>[L(B(e.content),1)])]),_:3},16)]),_:3},8,["onAfterEnter","onAfterLeave"])],8,["to","disabled"])}var p=F(_e,[["render",ge]]);function he(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!oe(e)}const O=["loading","success","warning","info","error"];let x=0,z=!1,k,m=!1,c=$([]);const Ce={type:void 0,content:"",position:"top",duration:3e3,vertical:!1,contentClass:void 0,loadingType:"circle",loadingSize:"normal",lockScroll:!1,teleport:"body",forbidClick:!1,onOpen:()=>{},onOpened:()=>{},onClose:()=>{},onClosed:()=>{}},Se={name:"var-snackbar-fade",tag:"div",class:"var-transition-group"},we={setup(){return()=>{const e=c.map(({id:t,reactiveSnackOptions:a,_update:s})=>{const i=document.querySelector(".var-transition-group");a.forbidClick||a.type==="loading"?i.classList.add("var-pointer-auto"):i.classList.remove("var-pointer-auto"),m&&(a.position="top");const o=f({position:m?"relative":"absolute"},Ee(a.position));return b(M,w(a,{key:t,style:o,"data-id":t,_update:s,show:a.show,"onUpdate:show":d=>a.show=d}),null)}),n=ue.zIndex;return b(se,w(Se,{style:{zIndex:n},onAfterEnter:$e,onAfterLeave:Oe}),he(e)?e:{default:()=>[e]})}}},l=function(e){const n=U(e)?e:{content:e},t=$(f(f({},Ce),n));t.show=!0,z||(z=!0,k=de(we).unmountInstance);const{length:a}=c,s={id:x++,reactiveSnackOptions:t};if(a===0||m)ze(s);else{const i=`update-${x}`;Ae(t,i)}return{clear(){!m&&c.length?c[0].reactiveSnackOptions.show=!1:t.show=!1}}};O.forEach(e=>{l[e]=n=>(U(n)?n.type=e:n={content:n,type:e},l(n))});l.install=function(e){e.component(p.name,p)};l.allowMultiple=function(e=!1){e!==m&&(c.forEach(n=>{n.reactiveSnackOptions.show=!1}),m=e)};l.clear=function(){c.forEach(e=>{e.reactiveSnackOptions.show=!1})};l.Component=p;function $e(e){var a,s;const n=e.getAttribute("data-id"),t=c.find(i=>i.id===D(n));t&&((s=(a=t.reactiveSnackOptions).onOpened)==null||s.call(a))}function Oe(e){var s,i;e.parentElement&&e.parentElement.classList.remove("var-pointer-auto");const n=e.getAttribute("data-id"),t=c.find(r=>r.id===D(n));t&&(t.animationEnd=!0,(i=(s=t.reactiveSnackOptions).onClosed)==null||i.call(s)),c.every(r=>r.animationEnd)&&(k==null||k(),c=$([]),z=!1)}function ze(e){c.push(e)}function Ae(e,n){const[t]=c;t.reactiveSnackOptions=f(f({},t.reactiveSnackOptions),e),t._update=n}function Ee(e="top"){return e==="bottom"?{[e]:"5%"}:{top:e==="top"?"5%":"45%"}}p.install=function(e){e.component(p.name,p)};var Ue=l;export{Ue as S};
