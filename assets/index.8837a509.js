import{F as $,u as Q}from"./provide.6a63a4bb.js";import{I as z}from"./index.a43e0611.js";import{b as h,i as X,t as Y}from"./shared.5973ad73.js";import{u as Z}from"./components.092cc01a.js";import{_}from"./IconSfc.29808136.js";import{q as x,r as C,D as ee,b as V,d as N,o as m,c as F,a as i,m as o,O as T,f as B,k as j,n as g,R as ne,t as ae,h as le,z as te}from"./vendor.cfbfc887.js";function oe(e){return["text","password"].includes(e)}const re={modelValue:{type:[String,Number]},type:{type:String,default:"text",validator:oe},textarea:{type:Boolean,default:!1},rows:{type:[String,Number],default:8},placeholder:{type:String},line:{type:Boolean,default:!0},hint:{type:Boolean,default:!0},textColor:{type:String},focusColor:{type:String},blurColor:{type:String},maxlength:{type:[String,Number]},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},resize:{type:Boolean,default:!1},validateTrigger:{type:Array,default:()=>["onInput","onClear"]},rules:{type:Array},onFocus:{type:Function},onBlur:{type:Function},onClick:{type:Function},onClear:{type:Function},onInput:{type:Function},onChange:{type:Function},"onUpdate:modelValue":{type:Function}};const ue=x({name:"VarInput",components:{[z.name]:z,[$.name]:$},props:re,setup(e){const f=C(`var-input-${ee().uid}`),y=C(null),s=C(!1),d=V(()=>X(e.modelValue)),I=V(()=>{const{type:n}=e;return n==="password"?n:d.value?"number":"text"}),p=V(()=>{const{maxlength:n,modelValue:a}=e;return n?h(a)?`0 / ${n}`:`${String(a).length}/${n}`:""}),{bindForm:c,form:l}=Q(),{errorMessage:U,validateWithTrigger:E,validate:P,resetValidation:b}=Z(),u=n=>{te(()=>{const{validateTrigger:a,rules:t,modelValue:r}=e;E(a,n,t,r)})},R=()=>{const{hint:n,modelValue:a}=e;if(!n&&!h(a))return"var-input--placeholder-hidden";if(n&&(!h(a)||s.value))return"var-input--placeholder-hint"},S=n=>d.value?Y(n):n,A=n=>{var a;s.value=!0,(a=e.onFocus)==null||a.call(e,n),u("onFocus")},W=n=>{var a;s.value=!1,(a=e.onBlur)==null||a.call(e,n),u("onBlur")},q=n=>{var r,v;const{value:a}=n.target,t=S(a);(r=e["onUpdate:modelValue"])==null||r.call(e,t),(v=e.onInput)==null||v.call(e,t,n),u("onInput")},O=n=>{var t;const{value:a}=n.target;(t=e.onChange)==null||t.call(e,S(a),n),u("onChange")},G=()=>{var M;const{disabled:n,readonly:a,clearable:t,onClear:r}=e;if((l==null?void 0:l.disabled.value)||(l==null?void 0:l.readonly.value)||n||a||!t)return;const v=d.value?0:"";(M=e["onUpdate:modelValue"])==null||M.call(e,v),r==null||r(v),u("onClear")},H=n=>{const{disabled:a,onClick:t}=e;(l==null?void 0:l.disabled.value)||a||(t==null||t(n),u("onClick"))},w=()=>{var n;(n=e["onUpdate:modelValue"])==null||n.call(e,d.value?0:""),b()},D=()=>P(e.rules,e.modelValue),J=()=>{y.value.focus()},K=()=>{y.value.blur()},L={reset:w,validate:D,resetValidation:b};return c==null||c(L),{el:y,type:I,id:f,isFocus:s,errorMessage:U,maxlengthText:p,formDisabled:l==null?void 0:l.disabled,formReadonly:l==null?void 0:l.readonly,isEmpty:h,computePlaceholderState:R,handleFocus:A,handleBlur:W,handleInput:q,handleChange:O,handleClear:G,handleClick:H,validate:D,resetValidation:b,reset:w,focus:J,blur:K}}}),ie={key:0,class:"var-input__autocomplete"},se=["for"];function de(e,f,y,s,d,I){const p=N("var-icon"),c=N("var-form-details");return m(),F("div",{class:o(["var-input var--box",[e.disabled?"var-input--disabled":null]]),onClick:f[0]||(f[0]=(...l)=>e.handleClick&&e.handleClick(...l))},[i("div",{class:o(["var-input__controller",[e.isFocus?"var-input--focus":null,e.errorMessage?"var-input--error":null,e.formDisabled||e.disabled?"var-input--disabled":null]]),style:g({color:e.errorMessage?null:e.isFocus?e.focusColor:e.blurColor})},[i("div",{class:o(["var-input__icon",[e.hint?null:"var-input--non-hint"]])},[T(e.$slots,"prepend-icon")],2),i("div",{class:o(["var-input__wrap",[e.hint?null:"var-input--non-hint"]])},[e.type==="password"?(m(),F("input",ie)):B("v-if",!0),(m(),j(ne(e.textarea?"textarea":"input"),{class:o(["var-input__input",[e.formDisabled||e.disabled?"var-input--disabled":null,e.textarea?"var-input--textarea":null,e.errorMessage?"var-input--caret-error":null]]),ref:"el",autocomplete:"new-password",id:e.id,disabled:e.formDisabled||e.disabled||e.formReadonly||e.readonly,type:e.type,value:e.modelValue,maxlength:e.maxlength,rows:e.rows,style:g({color:e.textColor,caretColor:e.errorMessage?null:e.focusColor,resize:e.resize?"vertical":"none"}),onFocus:e.handleFocus,onBlur:e.handleBlur,onInput:e.handleInput,onChange:e.handleChange},null,8,["id","disabled","type","value","maxlength","rows","class","style","onFocus","onBlur","onInput","onChange"])),i("label",{class:o([e.textarea?"var-input__textarea-placeholder":"var-input__placeholder",e.computePlaceholderState(),e.hint?null:"var-input--placeholder-non-hint"]),for:e.id},ae(e.placeholder),11,se)],2),i("div",{class:o(["var-input__icon",[e.hint?null:"var-input--non-hint"]])},[T(e.$slots,"append-icon",{},()=>[e.clearable&&!e.isEmpty(e.modelValue)?(m(),j(p,{key:0,class:"var-input__clear-icon","var-input-cover":"",name:"close-circle",size:"14px",onClick:e.handleClear},null,8,["onClick"])):B("v-if",!0)])],2)],6),e.line?(m(),F("div",{key:0,class:o(["var-input__line",[e.formDisabled||e.disabled?"var-input--line-disabled":null,e.errorMessage?"var-input--line-error":null]]),style:g({background:e.errorMessage?null:e.blurColor})},[i("div",{class:o(["var-input__dot",[e.isFocus?"var-input--spread":null,e.formDisabled||e.disabled?"var-input--line-disabled":null,e.errorMessage?"var-input--line-error":null]]),style:g({background:e.errorMessage?null:e.focusColor})},null,6)],6)):B("v-if",!0),le(c,{"error-message":e.errorMessage,"maxlength-text":e.maxlengthText},null,8,["error-message","maxlength-text"])],2)}var k=_(ue,[["render",de]]);k.install=function(e){e.component(k.name,k)};export{k as I};
