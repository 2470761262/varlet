var J=Object.defineProperty;var I=Object.getOwnPropertySymbols;var W=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable;var T=(e,t,n)=>t in e?J(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,u=(e,t)=>{for(var n in t||(t={}))W.call(t,n)&&T(e,n,t[n]);if(I)for(var n of I(t))X.call(t,n)&&T(e,n,t[n]);return e};import{q as z,r as ee,b as _,y as A,x as ne,d as g,i as te,v as ae,o as v,c as oe,a as h,m as j,O as y,k as C,f as N,n as B,l as V,t as L,h as b,w as S,P as w,T as se,Q as ie,p as O,N as re,a6 as le}from"./vendor.bac705d4.js";import{p as P,L as q}from"./index.607269ff.js";import{B as F}from"./index.fc52e8be.js";import{I as U}from"./index.10726e25.js";import{u as ce}from"./zIndex.148a12e4.js";import{p as D,c as de,m as ue}from"./components.7d95671e.js";import{_ as G}from"./IconSfc.001aecae.js";import{c as fe}from"./index.389a472f.js";import{g as M,t as x}from"./shared.5973ad73.js";import{u as pe}from"./lock.cdd0a0f9.js";function me(e){return["top","center","bottom"].includes(e)}function ve(e){return $.includes(e)}const Y={type:{type:String,validator:ve},position:{type:String,default:"top",validator:me},content:{type:String},contentClass:{type:String},duration:{type:Number,default:3e3},vertical:{type:Boolean,default:!1},loadingType:D(P,"type"),loadingSize:D(P,"size"),lockScroll:{type:Boolean,default:!1},show:{type:Boolean,default:!1},teleport:{default:"body"},forbidClick:{type:Boolean,default:!1},onOpen:{type:Function,default:()=>{}},onOpened:{type:Function,default:()=>{}},onClose:{type:Function,default:()=>{}},onClosed:{type:Function,default:()=>{}},"onUpdate:show":{type:Function},_update:{type:String}};const ye={success:"checkbox-marked-circle",warning:"warning",info:"information",error:"error",loading:""},be=z({name:"VarSnackbarCore",components:{[q.name]:q,[F.name]:F,[U.name]:U},props:Y,setup(e){const t=ee(null),{zIndex:n}=ce(()=>e.show,1);pe(e,"show","lockScroll");const l=_(()=>{const{position:i,vertical:m,type:d}=e,Q=`var-snackbar__wrapper var-snackbar__wrapper-${i} var-elevation--4`,R=m?" var-snackbar__vertical":"",Z=d&&$.includes(d)?` var-snackbar__wrapper-${d}`:"";return`${Q}${R}${Z}`}),a=_(()=>e.type==="loading"||e.forbidClick),s=_(()=>e.type?ye[e.type]:""),o=()=>{t.value=setTimeout(()=>{var i;e.type!=="loading"&&((i=e["onUpdate:show"])==null||i.call(e,!1))},e.duration)};return A(()=>e.show,i=>{var m,d;i?((m=e.onOpen)==null||m.call(e),o()):i===!1&&(clearTimeout(t.value),(d=e.onClose)==null||d.call(e))}),A(()=>e._update,()=>{clearTimeout(t.value),o()}),ne(()=>{var i;e.show&&((i=e.onOpen)==null||i.call(e),o())}),{zIndex:n,snackbarClass:l,iconName:s,isForbidClick:a}}}),ke={class:"var-snackbar__action"};function _e(e,t,n,l,a,s){const o=g("var-icon"),i=g("var-loading");return te((v(),oe("div",{class:"var-snackbar",style:B({pointerEvents:e.isForbidClick?"auto":"none",zIndex:e.zIndex})},[h("div",{class:j(e.snackbarClass),style:B({zIndex:e.zIndex})},[h("div",{class:j(["var-snackbar__content",[e.contentClass]])},[y(e.$slots,"default",{},()=>[V(L(e.content),1)])],2),h("div",ke,[e.iconName?(v(),C(o,{key:0,name:e.iconName},null,8,["name"])):N("v-if",!0),e.type==="loading"?(v(),C(i,{key:1,type:e.loadingType,size:e.loadingSize},null,8,["type","size"])):N("v-if",!0),y(e.$slots,"action")])],6)],4)),[[ae,e.show]])}var H=G(be,[["render",_e]]);const ge=z({name:"VarSnackbar",components:{VarSnackbarCore:H},props:Y,setup(){const{disabled:e}=de();return{disabled:e}}});function he(e,t,n,l,a,s){const o=g("var-snackbar-core");return v(),C(ie,{to:e.teleport,disabled:e.disabled},[b(se,{name:"var-snackbar-fade",onAfterEnter:e.onOpened,onAfterLeave:e.onClosed},{default:S(()=>[b(o,w(e.$props,{class:"var-snackbar-transition"}),{action:S(()=>[y(e.$slots,"action")]),default:S(()=>[y(e.$slots,"default",{},()=>[V(L(e.content),1)])]),_:3},16)]),_:3},8,["onAfterEnter","onAfterLeave"])],8,["to","disabled"])}var f=G(ge,[["render",he]]);function Ce(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!re(e)}const $=["loading","success","warning","info","error"];let K=0,E=!1,k,p=!1,r=O([]);const Se={type:void 0,content:"",position:"top",duration:3e3,vertical:!1,contentClass:void 0,loadingType:"circle",loadingSize:"normal",lockScroll:!1,teleport:"body",forbidClick:!1,onOpen:()=>{},onOpened:()=>{},onClose:()=>{},onClosed:()=>{}},we={name:"var-snackbar-fade",tag:"div",class:"var-transition-group"},Oe={setup(){return()=>{const e=r.map(({id:t,reactiveSnackOptions:n,_update:l})=>{const a=document.querySelector(".var-transition-group");n.forbidClick||n.type==="loading"?a.classList.add("var-pointer-auto"):a.classList.remove("var-pointer-auto"),p&&(n.position="top");const s=u({position:p?"relative":"absolute"},ze(n.position));return b(H,w(n,{key:t,style:s,"data-id":t,_update:l,show:n.show,"onUpdate:show":o=>n.show=o}),null)});return b(le,w(we,{style:{zIndex:fe.zIndex},onAfterEnter:$e,onAfterLeave:Ee}),Ce(e)?e:{default:()=>[e]})}}},c=function(e){const t=M(e)?e:{content:e},n=O(u(u({},Se),t));n.show=!0,E||(E=!0,k=ue(Oe).unmountInstance);const{length:l}=r,a={id:K++,reactiveSnackOptions:n};if(l===0||p)Ie(a);else{const s=`update-${K}`;Te(n,s)}return{clear(){!p&&r.length?r[0].reactiveSnackOptions.show=!1:n.show=!1}}};$.forEach(e=>{c[e]=t=>(M(t)?t.type=e:t={content:t,type:e},c(t))});c.install=function(e){e.component(f.name,f)};c.allowMultiple=function(e=!1){e!==p&&(r.forEach(t=>{t.reactiveSnackOptions.show=!1}),p=e)};c.clear=function(){r.forEach(e=>{e.reactiveSnackOptions.show=!1})};c.Component=f;function $e(e){var l,a;const t=e.getAttribute("data-id"),n=r.find(s=>s.id===x(t));n&&((a=(l=n.reactiveSnackOptions).onOpened)==null||a.call(l))}function Ee(e){var a,s;e.parentElement&&e.parentElement.classList.remove("var-pointer-auto");const t=e.getAttribute("data-id"),n=r.find(o=>o.id===x(t));n&&(n.animationEnd=!0,(s=(a=n.reactiveSnackOptions).onClosed)==null||s.call(a)),r.every(o=>o.animationEnd)&&(k==null||k(),r=O([]),E=!1)}function Ie(e){r.push(e)}function Te(e,t){const[n]=r;n.reactiveSnackOptions=u(u({},n.reactiveSnackOptions),e),n._update=t}function ze(e="top"){return e==="bottom"?{[e]:"5%"}:{top:e==="top"?"5%":"45%"}}f.install=function(e){e.component(f.name,f)};var Ge=c;export{Ge as S};
